"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3611],{95061:function(a,b,c){c.d(b,{Z:function(){return w}});var d=c(85893),e=c(60536),f=c.n(e),g=c(11163),h=c.n(g),i=c(67294),j=c(15342),k=c(78524),l=c(76037),m=c(29815),n=c(86455),o=c.n(n),p=c(73097),q=c(39536),r=c(25617),s=function(a){var b=a.date,c=b.date,e=b.dayName,g=b.longDayName,h=b.day,k=b.weekDay,l=b.weekOfYear,n=b.monthName,s=b.longMonthName,t=b.month,u=b.year,v=a.form,w=void 0===v?"appointment":v,x=a.fromAgenda,y=a.editing,z=a.appointments,A=a.setDaysAvailable,B=a.firstDayAvailable,C=(0,q.ZP)({day:h,month:t,year:u,weekDay:k,form:w,editing:y,isForClient:!x})||{},D=C.isAvailable,E=C.hasSpaceForSelectedService,F=(0,j.Z)({form:"cart",shouldCleanForm:!1}),G=F.formState.resourcesRequests,H=(0,j.Z)({form:w,shouldCleanForm:!1}),I=H.formState,J=H.setFormProperties,K=(0,r.v9)(function(a){return null==a?void 0:a.ui}).visible,L=I||{},M=L.service,N=L.selectedDay,O=L.selectedMonth,P=L.selectedMember,Q=L.resourcesNeeded,R=L.hoursUsedByResourcesByDay,S=function(){if(N!==h||O!==t){if(!D&&!x&&(null==M?void 0:M.frequencyType)==="Regular"){o().fire({title:"\xa1Lo sentimos!",html:"<p>".concat(null==P?void 0:null===(a=P.user)|| void 0===a?void 0:a.firstname," no atiende los ").concat(g).concat(k>4?"s":"","</p>"),icon:"info",confirmButtonText:"Entendido"});return}if(!D&&!x&&(null==M?void 0:M.frequencyType)!=="Regular"){o().fire({title:"\xa1Lo sentimos!",html:"<p>El servicio seleccionado no se encuentra disponible este d\xeda.</p>",icon:"info",confirmButtonText:"Entendido"});return}if(!E&&!x){o().fire({title:"\xa1Lo sentimos!",html:"<p>".concat(null==P?void 0:null===(b=P.user)|| void 0===b?void 0:b.firstname," no tiene turnos disponibles para el ").concat(h," de ").concat(s,"</p>"),icon:"info",confirmButtonText:"Entendido"});return}var a,b,d=(0,p.Z)(h,t,Q,G,R);J({data:{selectedDate:new Date(c).toString(),selectedDay:h,selectedWeekDay:k,selectedWeekOfYear:l,selectedMonth:t,selectedMonthName:n,selectedYear:u,workingHours:null==P?void 0:P.workingDays[k].workingHours,additionalBlockedHours:d}}),J({data:{selectedHour:null,selectedMinute:null,selectedHourBlock:null}})}};(0,i.useEffect)(function(){"appointment"===w&&A(function(a){return(0,m.Z)(a).concat([{day:h,month:t,year:u,isAvailable:D,hasSpaceForSelectedService:E},])})},[h]);var T=h===(null==B?void 0:B.day)&&t===(null==B?void 0:B.month)&&u===(null==B?void 0:B.year);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"jsx-a40c2ba3ad2a0f9a df fdc aic jcsb posr",children:[(null==z?void 0:z.length)>0&&(0,d.jsx)("div",{style:{width:"0.75rem",height:"0.75rem",borderRadius:"100%"},className:"jsx-a40c2ba3ad2a0f9a posa fwb df aic jcc bcyellow b2 r2 fs6",children:(0,d.jsx)("span",{className:"jsx-a40c2ba3ad2a0f9a",children:z.length})}),(0,d.jsx)("p",{className:"jsx-a40c2ba3ad2a0f9a "+"m0 mb1 fs11 tac ".concat(D?E?"cblack":"cnotavailablered":"cgreydarkest"),children:"mar"===n?"marzo":n}),(0,d.jsxs)("div",{onClick:S,className:"jsx-a40c2ba3ad2a0f9a "+"day-container ".concat(N===h&&O===t&&"selected"," ").concat(E?"has-space-for-service":"has-not-space-for-service"," ").concat(!D&&"not-available","  "),children:[(0,d.jsx)("p",{className:"jsx-a40c2ba3ad2a0f9a m0 mb2 fs11",children:e}),(0,d.jsx)("p",{className:"jsx-a40c2ba3ad2a0f9a m0 fs11",children:h})]}),T&&!N&&!K&&(0,d.jsxs)("div",{style:{bottom:"-5.8rem"},className:"jsx-a40c2ba3ad2a0f9a df fdc jcc aic posa tac",children:[(0,d.jsx)("i",{className:"jsx-a40c2ba3ad2a0f9a fa-duotone fa-arrow-up cprim fs17 mb5 db"}),(0,d.jsx)("span",{className:"jsx-a40c2ba3ad2a0f9a fs12",children:"1er d\xeda con disponibilidad"})]})]},h),(0,d.jsx)(f(),{id:"a40c2ba3ad2a0f9a",children:".day-container.jsx-a40c2ba3ad2a0f9a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;height:3.9rem;background-color:white;padding:.5rem;min-width:4.5rem;-webkit-box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);-moz-box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);cursor:pointer;-webkit-appearance:none}.has-space-for-service.jsx-a40c2ba3ad2a0f9a{background-color:var(--availableGreenBackground)}.has-not-space-for-service.jsx-a40c2ba3ad2a0f9a{background-color:var(--notAvailableRedBackground);color:var(--notAvailableRedColor)}.not-available.jsx-a40c2ba3ad2a0f9a{background-color:var(--greyDark);color:var(--greyDarkest)}.selected.jsx-a40c2ba3ad2a0f9a{color:white;background-color:var(--primColor)!important}.fa-arrow-up.jsx-a40c2ba3ad2a0f9a{position:relative;-webkit-animation:floatArrow 2s infinite;-moz-animation:floatArrow 2s infinite;-o-animation:floatArrow 2s infinite;animation:floatArrow 2s infinite}@-webkit-keyframes floatArrow{0%{-webkit-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(-20px);transform:translateY(-20px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@-moz-keyframes floatArrow{0%{-moz-transform:translateY(0);transform:translateY(0)}50%{-moz-transform:translateY(-20px);transform:translateY(-20px)}100%{-moz-transform:translateY(0);transform:translateY(0)}}@-o-keyframes floatArrow{0%{-o-transform:translateY(0);transform:translateY(0)}50%{-o-transform:translateY(-20px);transform:translateY(-20px)}100%{-o-transform:translateY(0);transform:translateY(0)}}@keyframes floatArrow{0%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(-20px);-moz-transform:translateY(-20px);-o-transform:translateY(-20px);transform:translateY(-20px)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0)}}@media screen and (max-width:700px){.day-container.jsx-a40c2ba3ad2a0f9a{min-width:4.5rem}}@media screen and (max-width:500px){.day-container.jsx-a40c2ba3ad2a0f9a{min-width:14vw;max-width:5rem}}"})]})},t=s,u=function(a){var b,c=a.maxDaysInFuture,e=a.form,g=void 0===e?"appointment":e,m=a.mt,n=a.title,o=a.startingDate,p=void 0===o?new Date:o,q=a.editing,r=a.fromAgenda,s=a.appointments,u=(0,j.Z)({form:g}),w=u.formState,x=u.setFormProperties,y=(0,i.useState)([]),z=y[0],A=y[1],B=(0,i.useState)({}),C=B[0],D=B[1],E=(0,i.useMemo)(function(){return v(w)},[w.hoursBlockedByServiceEventByDay]),F=(0,k.Z)({initialDay:E||p,maxDaysInFuture:c,serviceFreq:null==w?void 0:null===(b=w.service)|| void 0===b?void 0:b.frequencyType,isQuotaLimitted:!!E,setDaysAvailable:A,form:g,editing:q}),G=F.lastMove,H=F.dates,I=F.addOrRemoveDays;return(0,i.useEffect)(function(){if(h().asPath.includes("agenda")&&(null==H?void 0:H.length)>0&&!w.selectedDate){var a=H[0];x({data:{selectedDate:new Date().toString(),selectedMonth:null==a?void 0:a.month,selectedYear:null==a?void 0:a.year,selectedWeekOfYear:null==a?void 0:a.weekOfYear,selectedDay:null==a?void 0:a.day,selectedWeekDay:null==a?void 0:a.weekDay}})}},[H,p]),(0,i.useEffect)(function(){if("appointment"===g&&!q){var a=z.find(function(a){var b;return a.day===(null===(b=H[H.length-1])|| void 0===b?void 0:b.day)}),b=z.filter(function(a){return a.isAvailable&&a.hasSpaceForSelectedService});if(!C.day&&b.length>0){var c=b[0];D(function(){return c})}0===b.length&&a&&!r&&G>0&&(I(G),A(function(){return[]}))}},[z]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{marginTop:void 0===m?"2rem":m},className:"jsx-7c971a6427d405dd df jcfs mb5 calendar-dates-wrapper w100p",children:(0,d.jsxs)("h3",{className:"jsx-7c971a6427d405dd",children:[(0,d.jsx)("i",{className:"jsx-7c971a6427d405dd far fa-calendar-alt mr7"}),void 0===n?"Elegir fecha y horario":n]})}),(0,d.jsxs)("div",{className:"jsx-7c971a6427d405dd calendar-dates df aic jcsb maxw300",children:[(0,d.jsxs)("div",{className:"jsx-7c971a6427d405dd df fdc jcsb asfe h38",children:[(0,d.jsx)(l.Z,{days:-5,onClick:I}),(0,d.jsx)(l.Z,{days:-1,onClick:I})]}),null==H?void 0:H.map(function(a){return(0,d.jsx)(t,{date:a,form:g,editing:q,fromAgenda:r,firstDayAvailable:C,setDaysAvailable:A,appointments:null==s?void 0:s.filter(function(b){var c=b.selectedDay,d=b.selectedMonth,e=b.selectedYear;return c===a.day&&d===a.month&&e===a.year})},a.weekDay)}),(0,d.jsxs)("div",{className:"jsx-7c971a6427d405dd df fdc jcsb asfe h38",children:[(0,d.jsx)(l.Z,{days:5,onClick:I}),(0,d.jsx)(l.Z,{days:1,onClick:I})]})]}),(0,d.jsx)(f(),{id:"7c971a6427d405dd",children:".calendar-dates.jsx-7c971a6427d405dd{width:100%}.day-container.jsx-7c971a6427d405dd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;background-color:white;padding:.5rem;min-width:5rem;-webkit-box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);-moz-box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);box-shadow:0 .53px 1px 1px rgba(0,0,0,.2);cursor:pointer;-webkit-appearance:none}.selected.jsx-7c971a6427d405dd{color:white;background-color:var(--primColor)!important}@media screen and (max-width:700px){.day-container.jsx-7c971a6427d405dd{min-width:14vw}.calendar-dates.jsx-7c971a6427d405dd,.calendar-dates-wrapper.jsx-7c971a6427d405dd{width:95%}}"})]})};function v(a){var b,c=["De fecha variable","Por cupos"].includes(null===(b=a.service)|| void 0===b?void 0:b.frequencyType),d=Array.from((null==a?void 0:a.hoursBlockedByServiceEventByDay)||[]),e=c&&d.length>0?null==d?void 0:d.sort(function(a,b){return a.unixBOD-b.unixBOD})[0]:null,f=e?new Date(null==e?void 0:e.year,(null==e?void 0:e.month)-1,null==e?void 0:e.day):null;return f}var w=u},92235:function(a,b,c){c.d(b,{Z:function(){return x}});var d=c(85893),e=c(60536),f=c.n(e),g=c(47568),h=c(34051),i=c.n(h),j=c(15342),k=c(68874),l=c(69528),m=c(86455),n=c.n(m),o=function(a){var b=a.hourBlock,c=a.selectedDay,d=a.selectedMonth,e=new Date,f=e.getHours()+e.getMinutes()/60,g=e.getDate(),h=e.getMonth()+1;return 15*b/60<f&&c===g&&d===h},p=o,q=c(68691),r=c(39536),s=function(a){var b,c=a.index,e=a.form,h=a.isForClient,m=a.hourBlocksToShow,o=a.blockedByCartAppointment,s=a.hideToAvoidProfessionalOverlapping,t=a.warnToAvoidClientOverlapping,u=a.blockedForProfessional,v=a.hourBlockIsElegible,w=a.hourText,x=a.hoursCorrection,y=(0,j.Z)({form:e,shouldCleanForm:!1}),z=y.formState,A=y.setFormProperties,B=(0,j.Z)({form:"selectedAppointment"}),C=B.formState,D=C.hourBlocks,E=C.start,F=z||{},G=F.selectedMinute,H=F.selectedHour,I=F.selectedDay,J=F.selectedMonth,K=F.selectedYear,L=F.selectedWeekDay,M=F.selectedHourBlock,N=F.selectedMember,O=F.hoursBlockedByDay,P=F.hoursBlockedByDayDetail,Q=F.service,R=F.discount,S=F.couponCode,T=F.discountAmount,U=F.recurrences,V=(b=(0,g.Z)(i().mark(function a(b){var d,e,f,g,j;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=b.hourBlock,f=(e=(0,k.transformToHour)(d)||{}).hour,g=e.minute,!(aw&&h)){a.next=5;break}return n().fire({title:"Horario no permitido",html:"<p>No puedes reservar dos turnos para este servicio, ya que tiene l\xedmite de asistentes, deber\xe1s hacerlo con <u>otro usuario</u>.</p>",icon:"warning",confirmButtonText:"Entendido"}),a.abrupt("return");case 5:if(!((u||s)&&h)){a.next=8;break}return n().fire({title:"Horario no permitido",html:"<p>Ya tienes un turno con este mismo profesional en estos horarios</p>",icon:"warning",confirmButtonText:"Entendido"}),a.abrupt("return");case 8:if(!(t&&!u)){a.next=14;break}return a.next=11,n().fire({title:"\xa1Atenci\xf3n!",html:"<p>En el horario que est\xe1s intentando seleccionar (".concat(w,"), la duraci\xf3n de este servicio (").concat((0,l.Z)({service:Q}),') se solapar\xeda con la de otro turno del carrito.</p>\n        <p>Si los servicios de ambos turnos no pueden ser prestados simult\xe1neamente, <u class="cred">no deber\xedas elegir este horario</u>.</p>\n        <p>\xbfDeseas seleccionarlo de todos modos?</p>\n        '),icon:"warning",confirmButtonText:"S\xed, seleccionar",showCancelButton:!0,cancelButtonText:"No, cancelar",allowOutsideClick:!1});case 11:if((j=a.sent).isConfirmed){a.next=14;break}return a.abrupt("return");case 14:if(v||h&&!(c<=27)||n().fire({title:"\xa1Atenci\xf3n!",html:"<p>Este horario est\xe1 por fuera del horario de atenci\xf3n del profesional, o bien se solapar\xeda con otro turno.</p>",icon:"warning",confirmButtonText:"Entendido"}),au&&n().fire({title:"\xa1Atenci\xf3n!",html:"<p>Este horario ya pas\xf3.</p>",icon:"warning",confirmButtonText:"Entendido"}),!_||at||h||n().fire({title:"\xa1Atenci\xf3n!",html:"\n          <div class='df fdc jcc aic'>\n          <p>Este horario est\xe1 bloqueado por:</p>\n          <div class='df fdc aifs'>\n          ".concat((null==aa?void 0:aa.includes("appointment"))?"<li>Otro turno</li>":"","\n          ").concat((null==aa?void 0:aa.includes("recurrence"))?"<li>Turnos recurrentes</li>":"","\n\n          ").concat((null==aa?void 0:aa.includes("novelty"))?"<li> Novedades</li>":"","\n          ").concat((null==aa?void 0:aa.includes("resource"))?" <li> Falta de recursos</li>":"","\n          </div>\n          </div>\n        "),icon:"warning",confirmButtonText:"Entendido"}),!(H===f&&G===g)){a.next=19;break}return a.abrupt("return");case 19:A({data:{selectedHourBlock:d,selectedHour:f,selectedMinute:g,discount:!h&&R?R:0,couponCode:!h&&S?S:"",discountAmount:!h&&T?T:0}});case 20:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)}),W=null==O?void 0:O.find(function(a){return a.day===I&&a.month===J}),X=P,Y=(0,r.FZ)(U,Q,W,P,I,J,K,N),Z=Y.newHoursBlocked,$=Y.newHoursBlockedDetail;W=Z,X=$||{};var _=null==W?void 0:null===(af=W.hoursBlocked)|| void 0===af?void 0:af.includes(c),aa=X[c],ab=0,ac=!0,ad=!1,ae=void 0;try{for(var af,ag,ah,ai,aj,ak,al,am,an=((null==Q?void 0:Q.resources)||[])[Symbol.iterator]();!(ac=(am=an.next()).done);ac=!0){var ao=am.value;ab=ao.blockingMinutesCount>ab?ao.blockingMinutesCount:ab}}catch(ap){ad=!0,ae=ap}finally{try{ac||null==an.return||an.return()}finally{if(ad)throw ae}}var aq=(null==Q?void 0:Q.frequencyType)==="Regular",ar=(null==Q?void 0:Q.frequencyType)==="Recurrente",as=(null==Q?void 0:Q.frequencyType)==="Por cupos",at=(null==D?void 0:D.includes(c))&&I===(null==E?void 0:E.day),au=p({hourBlock:c,selectedDay:I,selectedMonth:J}),av=N.workingDays[L].hiddenHours.includes(c),aw=null==o?void 0:o.some(function(a){return a.selectedHourBlock===c&&a.selectedMember._id===N._id}),ax=!(null==m?void 0:m.some(function(a){return w.slice(-2).includes(a)})),ay="hs";av&&(aq||ar)&&(v=!1,h&&(w="")),h&&(ax&&!as||s)&&(v=!1,w="");var az=(null==o?void 0:o.length)>0;as&&!v&&(w=""),h&&au&&(v=!1,w=""),w||(ay="");var aA=az&&(v||!!w)&&!h;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{onClick:function(){return V({hourBlock:c})},className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" "+"block ".concat(!v&&(h||c<=27||as)&&"empty-block"," ").concat(!v&&(!h||c<=27||au)&&"empty-block-but-elegible"," ").concat(_&&!h&&"occupied-block"," ").concat(!v&&"novelty"===e&&"its-reserved"," ").concat(M===c&&"selected","\n        ").concat(v&&"elegible-block","\n        ").concat((at||az&&h)&&"block-being-edited","\n\n        "),children:[aA&&(0,d.jsx)("div",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" posa t2 l2 z2",children:(0,d.jsx)(q.Z,{width:"0.8rem",height:"0.8rem",src:null===(ag=o[0].selectedMember)|| void 0===ag?void 0:null===(ah=ag.user)|| void 0===ah?void 0:ah.pictureUrl})}),aA&&o.length>=2&&(0,d.jsx)("div",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" posa t2 r-7 z2",children:(0,d.jsx)(q.Z,{width:"0.8rem",height:"0.8rem",src:null===(ai=o[1].selectedMember)|| void 0===ai?void 0:null===(aj=ai.user)|| void 0===aj?void 0:aj.pictureUrl})}),aA&&o.length>=3&&(0,d.jsx)("div",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" posa b2 l2 z2",children:(0,d.jsx)(q.Z,{width:"0.8rem",height:"0.8rem",src:null===(ak=o[2])|| void 0===ak?void 0:ak.selectedMember.user.pictureUrl})}),aA&&4===o.length&&(0,d.jsx)("div",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" posa b2 r-7 z2",children:(0,d.jsx)(q.Z,{width:"0.8rem",height:"0.8rem",src:null===(al=o[3])|| void 0===al?void 0:al.selectedMember.user.pictureUrl})}),az&&!h&&(0,d.jsx)("div",{style:{width:"1rem",height:"100%",borderTopRightRadius:"0.5rem",borderBottomRightRadius:"0.5rem"},className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" "+"posa r0 b0 bcwhite ".concat(!v&&(h||c<=27)&&"empty-block"," ").concat(!v&&(!h||c<=27||au)&&"empty-block-but-elegible"," ").concat(_&&!h&&"occupied-block"," ").concat(!v&&"novelty"===e&&"its-reserved"," ").concat(M===c&&"selected","\n          ").concat(v&&"elegible-block","\n          ").concat(at&&"block-being-edited","\n          ")}),(0,d.jsxs)("p",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" "+"".concat(av&&(aq||ar)&&"hidden-hour"," w100p tac m0 fs11 ").concat(0!==x?"mt-3 mb3":"mb0 mt0"),children:[w," ",(0,d.jsx)("small",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" "+"fs8 ".concat(M===c?"cwhite":"cgreydarkest"),children:ay})]}),-24===x&&(0,d.jsx)("small",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" time-aclaration",children:"D\xeda siguiente"}),24===x&&(0,d.jsx)("small",{className:f().dynamic([["f9e791cf4c08cb47",[M===c?"white":"var(--blue)"]]])+" time-aclaration",children:"D\xeda anterior"})]},c),(0,d.jsx)(f(),{id:"f9e791cf4c08cb47",dynamic:[M===c?"white":"var(--blue)"],children:".block.__jsx-style-dynamic-selector{position:relative;background-color:white;padding:.4rem .2rem;margin:0 .05rem;-webkit-box-shadow:0 .53px 1px .5px rgba(0,0,0,.2);-moz-box-shadow:0 .53px 1px .5px rgba(0,0,0,.2);box-shadow:0 .53px 1px .5px rgba(0,0,0,.2);-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;border:none;min-width:6.4rem;margin:.8rem .5rem 0 .5rem;cursor:pointer;-webkit-appearance:none}.its-reserved.__jsx-style-dynamic-selector{background-color:var(--notAvailableRedBackground);color:var(--notAvailableRedColor)}.empty-block.__jsx-style-dynamic-selector{margin:0 .5rem!important;padding:0!important;-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important}.time-aclaration.__jsx-style-dynamic-selector{position:absolute;bottom:-.15rem;left:0;color:".concat(M===c?"white":"var(--blue)",";font-size:.65rem;text-align:center;width:100%}.hidden-hour.__jsx-style-dynamic-selector{text-decoration:line-through}.empty-block-but-elegible.__jsx-style-dynamic-selector{color:var(--greyDarkest);background-color:var(--grey)!important}.occupied-block.__jsx-style-dynamic-selector{color:var(--notAvailableRedColor);background-color:var(--notAvailableRedBackground)!important}.lack-resource-block.__jsx-style-dynamic-selector{color:var(--primColor);background-color:var(--primColorLigthest)!important}.block-being-edited.__jsx-style-dynamic-selector{color:var(--black);background-color:var(--editingYellowColor)!important}.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector>p.__jsx-style-dynamic-selector>small.__jsx-style-dynamic-selector{color:white;background-color:var(--primColor)!important}@media screen and (max-width:600px){.block.__jsx-style-dynamic-selector{min-width:17vw}}@media screen and (max-width:500px){.block.__jsx-style-dynamic-selector{min-width:19.5vw}}@media screen and (max-width:400px){.block.__jsx-style-dynamic-selector{min-width:18.5vw}}")})]})},t=s,u=function(a){var b=a.morning,c=a.form,e=a.isForClient,f=a.minAnticipationRequired,g=a.hourBlocksToShow,h=a.hoursBlockedByCartAppointments,i=a.editing,l=(0,j.Z)({form:c,shouldCleanForm:!1}).formState||{},m=l.selectedDate,n=l.selectedDay,o=l.selectedMonth,p=l.selectedYear,q=l.selectedWeekDay,s=l.hoursBlockedByDayDetail,u=l.selectedMember,v=l.service,w=l.tzDifference,x=v||{},y=x.duration,z=x.blockingMinutes,A=x.resources,B=x.frequencyType,C=((0,r.ZP)({day:n,month:o,year:p,weekDay:q,form:c,editing:i,isForClient:e})||{}).finalBlocksAvailableForService,D=null==h?void 0:h.map(function(a){return a.hoursBlocked}).flat(),E=null==h?void 0:h.filter(function(a){return a.selectedMember._id===u._id}).map(function(a){return a.hoursBlocked}).flat(),F=Math.ceil(Math.max(y,z)/15),G=Math.ceil(y/15),H=function(a){var b=Array(F).fill(0).map(function(b,c){return a+c});return null==E?void 0:E.some(function(a){return b.includes(a)})},I=function(a){var b=Array(G).fill(0).map(function(b,c){return a+c});return null==D?void 0:D.some(function(a){return b.includes(a)})},J={},K=Array(96).fill(0).map(function(a,b){return b}),L=0,M=null==u?void 0:u.workingDays[q],N=M.rangesLimits,O=M.hiddenHours,P={morning:!1,afternoon:!1},Q=!0,R=!1,S=void 0;try{for(var T,U=(A||[])[Symbol.iterator]();!(Q=(T=U.next()).done);Q=!0){var V=T.value;L=V.blockingMinutesCount>L?V.blockingMinutesCount:L}}catch(W){R=!0,S=W}finally{try{Q||null==U.return||U.return()}finally{if(R)throw S}}var X=(null==v?void 0:v.frequencyType)==="Regular",Y=(null==v?void 0:v.frequencyType)==="Recurrente",Z="De fecha variable"===B,$="Por cupos"===B,_=!0,aa=!1,ab=void 0;try{for(var ac,ad=K[Symbol.iterator]();!(_=(ac=ad.next()).done);_=!0){var ae=ac.value,af=(0,k.checkIfBlockIsElegible)({hourBlock:ae,finalBlocksAvailableForService:C,hoursBlockedDetail:null==s?void 0:s.find(function(a){return a.day===n}),blocksServiceOccupy:v?Math.ceil(v.blockingMinutes/15):0,blocksServiceDuration:v?Math.ceil(v.duration/15):0,blocksServiceLongestResourceUsed:L,isVariableService:Z,isQuottaLimitedService:$,lastMemberWorkingHours:(null==N?void 0:N.length)===2?[N[1]]:[N[1],N[3]],isForClient:e,tzDifference:w})||{},ag=af.hourBlockIsElegible,ah=af.hourText,ai=af.hoursCorrection;J[ae]={hourBlockIsElegible:ag,hourText:ah,hoursCorrection:ai};var aj=O.includes(ae)&&(X||Y);(!ah||!ag||aj)&&(e||$)||(P[ae<48?"morning":"afternoon"]=!0)}}catch(ak){aa=!0,ab=ak}finally{try{_||null==ad.return||ad.return()}finally{if(aa)throw ab}}return(0,d.jsxs)(d.Fragment,{children:["appointment"===c&&P[b?"morning":"afternoon"]&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h4",{className:"w95p mt18 mb-6 fs11",children:[(0,d.jsx)("i",{className:"far fa-clock mr3 fs9"})," Por la"," ",b?"ma\xf1ana":"tarde"]}),(0,d.jsx)("hr",{className:"mt5",style:{borderBottom:"none",borderLeft:"none",borderTop:"1.5px solid #333 ",width:b?"7.3rem":"6.1rem",marginLeft:"2.3rem"}})]}),(0,d.jsx)("div",{className:"df aic jcc fwrap w100p maxw100p",children:m&&Array(48).fill(b?0:48,0,48).map(function(a,b){var i,j,k;return(0,d.jsx)(t,{index:b+a,form:c,isForClient:e,minAnticipationRequired:f,hourBlocksToShow:g,hourBlockIsElegible:null===(i=J[b+a])|| void 0===i?void 0:i.hourBlockIsElegible,hourText:null===(j=J[b+a])|| void 0===j?void 0:j.hourText,hoursCorrection:null===(k=J[b+a])|| void 0===k?void 0:k.hoursCorrection,hideToAvoidProfessionalOverlapping:H(b+a)&&!(null==E?void 0:E.includes(b+a))&&e,warnToAvoidClientOverlapping:I(b+a)&&e,blockedByCartAppointment:null==h?void 0:h.filter(function(c){return c.hoursBlocked.includes(b+a)}),blockedForProfessional:null==E?void 0:E.includes(b+a)},b)})})]})},v=u,w=function(a){var b=a.form,c=void 0===b?"appointment":b,e=a.isForClient,g=void 0===e||e,h=a.minAnticipationRequired,i=a.hourBlocksToShow,j=a.hoursBlockedByCartAppointments,k=a.editing;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{morning:!0,form:c,editing:k,isForClient:g,hoursBlockedByCartAppointments:j,minAnticipationRequired:h,hourBlocksToShow:i}),(0,d.jsx)(v,{form:c,editing:k,isForClient:g,hoursBlockedByCartAppointments:j,minAnticipationRequired:h,hourBlocksToShow:i}),(0,d.jsx)(f(),{id:"cffc054d0dee8ac9",children:"@media screen and (max-width:768px){.hours-wrapper.jsx-cffc054d0dee8ac9{width:95%}}"})]})},x=w},48470:function(a,b,c){var d=c(85893),e=c(60536),f=c.n(e),g=c(11163),h=c.n(g),i=c(67294),j=c(25617),k=c(80686),l=c(84810),m=c(15342),n=c(57966),o=c(68691),p=c(1478),q=c(73860),r=c(79301),s=c(59730),t=c(47004),u=c(25357),v=c(27484),w=c(77543),x=function(a){var b,c=a.memberId,e=a.companyId,g=a.isAdministrative,x=a.isProfessional,y=a.isOwner,z=a.showPrices,A=(0,m.Z)({form:"appointment",shouldCleanForm:!1}),B=A.formState,C=A.setFormProperties,D=B||{},E=D.service,F=D.selectedMember,G=D.user,H=h().asPath.includes("agenda"),I=(0,j.I0)(),J=(0,l.Z)({user:G,shouldTrimLastname:!1}),K=null==F?void 0:null===(b=F.services)|| void 0===b?void 0:b.find(function(a){return(null==a?void 0:a._id)===E._id}),L=function(){(!H||g||y)&&(localStorage.removeItem("autoSelectProfessional"),I((0,n.$Z)({modal:"professional"})))};(0,i.useEffect)(function(){H&&c&&x&&(0,k.H)("/members/".concat(c,"?companyId=").concat(e,"&hola=1")).then(function(a){var b,c=null==a?void 0:null===(b=a.services)|| void 0===b?void 0:b.find(function(a){return(null==a?void 0:a._id)===B.service._id});c&&C({data:{selectedMember:a,currency:null==c?void 0:c.currency,countryLocale:null==c?void 0:c.countryLocale,user:a.user,price:null==c?void 0:c.price,isAdministrative:a.roles.includes("Administrativo")}})})},[H,c]),(0,i.useEffect)(function(){if(F){C({data:{loading:!0}});var a=(0,t.Z)(null==E?void 0:E._id,null==E?void 0:E.frequencyType,null==F?void 0:F.differentStore,null==F?void 0:F.stores[0]._id,!1);(0,k.H)("/members/appointments/".concat(null==F?void 0:F._id,"?").concat(a,"&where=3")).then(function(a){var b=a.hoursBlockedByDay,c=a.hoursBlockedByServiceEventByDay,d=a.hoursBlockedByDayDetail,e=a.hoursUsedByResourcesByDay,f=a.resourcesNeeded;C({data:{hoursBlockedByDay:b,hoursBlockedByServiceEventByDay:c,hoursBlockedByDayDetail:d,hoursUsedByResourcesByDay:e,resourcesNeeded:f,loading:!1}})}).catch(console.log)}},[F]);var M=(0,s.Z)(null==F?void 0:F.workingDays),N=(0,w.Z)(K),O=N.price,P=N.color,Q=N.priceNumber;return(0,d.jsxs)(d.Fragment,{children:[F&&(0,d.jsxs)("div",{className:"jsx-5f0ef923b5366007 df mt20 mb5 jcsb w100p maxw300 heading",children:[(0,d.jsxs)("h3",{className:"jsx-5f0ef923b5366007",children:[(0,d.jsx)("i",{className:"jsx-5f0ef923b5366007 fas fa-briefcase mr7"}),"Profesional elegido"]}),(0,d.jsx)(u.Z,{onClick:L})]}),F&&(0,d.jsxs)(p.Z,{width:"30rem",widthOnMobile:"95%",onClick:L,children:[(0,d.jsx)(o.Z,{src:G?null==G?void 0:G.pictureUrl:"",isSrcFullPath:!0,noImageFile:"user-no-image.png"}),(0,d.jsx)(r.Z,{styles:{flex:1,fontSize:"1.2rem",textAlign:"left",paddingRight:"2rem"},clarification:M,width:"90%",children:J}),K&&!(void 0===z||z)&&(0,d.jsxs)("span",{className:"jsx-5f0ef923b5366007 tar",children:[Q>0&&O,0===Q&&(0,d.jsx)("b",{className:"jsx-5f0ef923b5366007 "+(P||""),children:O})]})]}),E&&H&&!F&&!g&&!y&&(0,d.jsx)(q.Z,{small:!0,changeColor:!0,marginTop:"4rem"}),E&&!F&&(!H||g||y)&&(0,d.jsxs)("div",{onClick:function(){return I((0,n.$Z)({modal:"professional"}))},className:"jsx-5f0ef923b5366007 professional-selector posr",children:[(0,d.jsxs)("h3",{className:"jsx-5f0ef923b5366007",children:[(0,d.jsx)("i",{className:"jsx-5f0ef923b5366007 fas fa-briefcase mr7"}),"Elegir profesional"]}),(0,d.jsx)(v.Z,{text:"Presiona para elegir",bottom:"-4.2rem",fs:"1.7rem"})]}),(0,d.jsx)(f(),{id:"5f0ef923b5366007",children:".professional-selector.jsx-5f0ef923b5366007{font-size:1.2rem;cursor:pointer;background-color:white;width:30rem;margin-top:1rem;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;padding:1rem;-webkit-box-shadow:0 .53px 3px rgba(0,0,0,.2);-moz-box-shadow:0 .53px 3px rgba(0,0,0,.2);box-shadow:0 .53px 3px rgba(0,0,0,.2)}.professional-name.jsx-5f0ef923b5366007{white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;padding-right:2rem}@media screen and (max-width:700px){.professional-selector.jsx-5f0ef923b5366007{max-width:95%}.heading.jsx-5f0ef923b5366007{max-width:95%}}"})]})};b.Z=x},15474:function(a,b,c){var d=c(85893),e=c(60536),f=c.n(e),g=c(25617),h=c(69528),i=c(15342),j=c(57966),k=c(68691),l=c(1478),m=c(48729),n=c(25357),o=c(27484),p=c(77543),q=function(a){var b,c=a.marginTop,e=a.isForClient,q=a.showPrices,r=(0,i.Z)({form:"appointment",shouldCleanForm:!1}).formState,s=(0,g.v9)(function(a){return null==a?void 0:a.ui}).visible,t=(r||{}).service,u=(0,g.I0)(),v=(null==t?void 0:null===(b=t.images)|| void 0===b?void 0:b.length)>0,w=(null==t?void 0:t.frequencyType)==="Recurrente",x=(null==t?void 0:t.frequencyType)==="De fecha variable",y=(null==t?void 0:t.frequencyType)!=="Regular",z=(0,p.Z)(t),A=z.price,B=z.color,C=z.priceNumber;return(0,d.jsxs)(d.Fragment,{children:[t&&(0,d.jsxs)("div",{style:{marginTop:void 0===c?"0":c},className:"jsx-7630b9f1f538226f df jcsb mb5 w100p mt15 heading",children:[(0,d.jsxs)("h3",{className:"jsx-7630b9f1f538226f",children:[(0,d.jsx)("i",{className:"jsx-7630b9f1f538226f fas fa-concierge-bell mr7"}),"Servicio elegido"]}),(0,d.jsx)(n.Z,{onClick:function(){return u((0,j.$Z)({modal:"service"}))}})]}),t?(0,d.jsx)(l.Z,{width:"100%",widthOnMobile:"95%",onClick:function(){return u((0,j.$Z)({modal:"service"}))},children:(0,d.jsxs)("div",{className:"jsx-7630b9f1f538226f df aic jcsb w100p",children:[(0,d.jsxs)("div",{style:{flex:1},className:"jsx-7630b9f1f538226f df aic w100p",children:[v&&(0,d.jsx)("div",{className:"jsx-7630b9f1f538226f w20 h20 mr10",children:(0,d.jsx)(k.Z,{src:t.images[0],width:"2rem",height:"2rem",isSrcFullPath:!0})}),(0,d.jsxs)("div",{style:{flex:1,width:"100%"},className:"jsx-7630b9f1f538226f df fdc",children:[(0,d.jsx)("p",{style:{marginTop:y||q?"0.5rem":"1rem"},className:"jsx-7630b9f1f538226f "+"service-name w100p fs12 ".concat(y||q?"mb0 ":""),children:t.name}),(0,d.jsxs)("div",{className:"jsx-7630b9f1f538226f df aic",children:[y&&(0,d.jsxs)("div",{style:{marginLeft:"-0.2rem"},className:"jsx-7630b9f1f538226f df aic mt2 mb7",children:[(!e||!x)&&(0,d.jsx)("small",{className:"jsx-7630b9f1f538226f "+"cgrey dib ".concat(m.eb[null==t?void 0:t.frequencyType]," wauto pl5 pr5 br5 lh10 fs8 mr5"),children:null==t?void 0:t.frequencyType}),w&&(0,d.jsx)("small",{className:"jsx-7630b9f1f538226f cgreydarkest ml3 lh10 fs8 mr5",children:1===t.recurrenceWeeks?"todas las semanas":"cada ".concat(t.recurrenceWeeks," semanas")})]}),q&&(0,d.jsx)("small",{style:{marginRight:"-0.2rem",width:"fit-content"},className:"jsx-7630b9f1f538226f cgrey db br5 bcprimlightest lh10 mb8 mt3 pl5 pr5 fs8 tac",children:null==t?void 0:t.modality})]})]})]}),(0,d.jsxs)("div",{className:"jsx-7630b9f1f538226f df fdc aife jcc",children:[q&&(0,d.jsxs)("span",{className:"jsx-7630b9f1f538226f "+"tar mb-5 mt2 fs11 ".concat(B),children:[C>0&&A,isNaN(A)&&0===C&&(0,d.jsx)("b",{style:{width:"5rem",whiteSpace:"normal"},className:"jsx-7630b9f1f538226f "+"".concat(B," fs9 lh10 dib mt3"),children:A})]}),(0,d.jsx)("p",{className:"jsx-7630b9f1f538226f "+"fs10 cblacklight tar minw40 m0 mt5 ".concat(!0===q?"mb5":""),children:(0,h.Z)({service:t})}),!q&&(0,d.jsx)("small",{style:{marginRight:"-0.2rem"},className:"jsx-7630b9f1f538226f cgrey db bcprimlightest wauto pl5 pr5 br5 lh10 fs7 tac mt2 mb7",children:null==t?void 0:t.modality})]})]})}):(0,d.jsxs)("div",{onClick:function(){return u((0,j.$Z)({modal:"service"}))},className:"jsx-7630b9f1f538226f service-selector w100p posr",children:[(0,d.jsxs)("h3",{className:"jsx-7630b9f1f538226f",children:[(0,d.jsx)("i",{className:"jsx-7630b9f1f538226f fas fa-concierge-bell mr7"}),"Elegir servicio"]}),!s&&(0,d.jsx)(o.Z,{text:"Presiona para elegir",bottom:"-4.2rem",fs:"1.7rem"})]}),(0,d.jsx)(f(),{id:"7630b9f1f538226f",children:".service-selector.jsx-7630b9f1f538226f{font-size:1.2rem;cursor:pointer;background-color:white;width:100%;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;margin-top:1rem;padding:1rem;-webkit-box-shadow:0 .53px 3px rgba(0,0,0,.2);-moz-box-shadow:0 .53px 3px rgba(0,0,0,.2);box-shadow:0 .53px 3px rgba(0,0,0,.2)}.service-name.jsx-7630b9f1f538226f{padding-right:.5rem;width:95%}@media screen and (max-width:700px){.service-selector.jsx-7630b9f1f538226f{max-width:95%}.service-name.jsx-7630b9f1f538226f{max-width:90%}.heading.jsx-7630b9f1f538226f{max-width:95%}}"})]})};b.Z=q},37238:function(a,b,c){c.d(b,{Z:function(){return s}});var d=c(85893),e=c(60536),f=c.n(e),g=c(25617),h=c(13288),i=c(15342),j=c(57966),k=c(73860),l=c(35666),m=function(a){var b,c=a.store,e=a.serviceModality,g=a.storesCount,h=a.isForClient,i=a.showPrices,j=c.address,k=j.formattedAddress,m=j.location,n=j.countryID;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"jsx-c21dc8bdc2c0f450 "+"w100 ".concat("Presencial"===e?"mt8":""," oh ohy minh70 p2 "),children:[("Presencial"===e||!h)&&(0,d.jsxs)("div",{className:"jsx-c21dc8bdc2c0f450 df aic jcsb",children:[(0,d.jsxs)("p",{className:"jsx-c21dc8bdc2c0f450 address",children:[(0,d.jsx)("i",{className:"jsx-c21dc8bdc2c0f450 fas fa-map-marker-alt mr5"}),k]}),(0,d.jsx)("p",{onClick:function(){return window.open("https://www.google.com/maps/place/".concat(m.coordinates[1],",").concat(m.coordinates[0]),"_blank")},className:"jsx-c21dc8bdc2c0f450 m0 mb4 cursorp",children:(0,d.jsx)("u",{className:"jsx-c21dc8bdc2c0f450",children:"Mapa"})})]}),Array.isArray(c.members)&&(null===(b=c.members)|| void 0===b?void 0:b.sort(function(a,b){return a.order-b.order}).map(function(a){return(0,d.jsx)("div",{className:"jsx-c21dc8bdc2c0f450 oh ohy maxh20vh p2",children:(0,d.jsx)(l.Z,{member:a,form:"appointment",justOne:!0,countryID:n,lat:Array.isArray(m.coordinates)?m.coordinates[1]:"",lng:Array.isArray(m.coordinates)?m.coordinates[0]:"",storesCount:g,membersCount:c.members.length,isForClient:h,showPrices:i},a._id)})}))]}),(0,d.jsx)(f(),{id:"c21dc8bdc2c0f450",children:".address.jsx-c21dc8bdc2c0f450{margin:0 0 .4rem 0;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:75%}"})]})},n=m,o=c(5152),p=c.n(o),q=p()(function(){return Promise.resolve().then(c.bind(c,16777))},{loadableGenerated:{webpack:function(){return[16777]}},ssr:!1}),r=function(a){var b=a.asMember,c=a.isForClient,e=a.showPrices,l=void 0===e||e,m=(0,i.Z)({form:"appointment",shouldCleanForm:!1}).formState,o=(m||{}).service,p=(0,h.ZP)(o?"/members/service/".concat(o._id,"?asMember=").concat(b):null),r=p.data,s=(0,g.I0)(),t=[];return Array.isArray(r)&&(t=r.reduce(function(a,b){var c=b.stores[0],d=null==a?void 0:a.some(function(a){return a._id===c._id});if(0===a.length||!d){var e={_id:c._id,order:c.order,address:c.address,members:[b]};return a.concat(e)}if(d)return a.map(function(a){return a._id===c._id?{_id:a._id,order:a.order,address:a.address,members:a.members.concat(b)}:a})},[])),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"jsx-d1659427a7c82454 df fdc aic",children:[(0,d.jsxs)("h1",{className:"jsx-d1659427a7c82454 mb10",children:[(0,d.jsx)("i",{className:"jsx-d1659427a7c82454 fas fa-briefcase mr7"}),"Elegir profesional"]}),!r&&(0,d.jsx)(k.Z,{changeColor:!0,height:"5rem",smallest:!0}),(0,d.jsxs)("div",{className:"jsx-d1659427a7c82454 professionals-to-select",children:[Array.isArray(t)&&(null==t?void 0:t.sort(function(a,b){return a.order-b.order}).map(function(a){return(0,d.jsx)(n,{store:a,serviceModality:null==o?void 0:o.modality,storesCount:null==t?void 0:t.length,isForClient:c,showPrices:l},a._id)})),(null==o?void 0:o.frequencyType)==="Por cupos"&&Array.isArray(t)&&0===t.length&&!!r&&(0,d.jsx)("p",{className:"jsx-d1659427a7c82454 cred tac",children:"No hay ning\xfan evento a futuro para este servicio"})]}),(0,d.jsx)(q,{onClick:function(){return s((0,j.Cp)())},styles:{marginTop:"2rem"},color:"--black",backgroundColor:"--grey",width:"99%",widthOnCellphone:"97%",children:"Cerrar"})]}),(0,d.jsx)(f(),{id:"d1659427a7c82454",children:".professionals-to-select.jsx-d1659427a7c82454{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;max-height:60vh;overflow:hidden;overflow-y:auto;padding:.5rem}"})]})},s=r},76037:function(a,b,c){var d=c(85893),e=function(a){var b=a.days,c=a.onClick,e=a.mt;return(0,d.jsx)("button",{onClick:function(){return c(b)},className:"df jcc aic w15 br3 cursorp bnone pt4 pb4 pr3 pl3 cwhite bcblack fs15 onone",style:{marginTop:e,boxShadow:"0 1px 3px rgba(0,0,0,0.2)",WebkitAppearance:"none"},children:(0,d.jsx)("i",{className:"fas fa-angle".concat(Math.abs(b)>1?"-double":"","-").concat(b>0?"right":"left"," fs10  ")})})};b.Z=e},60559:function(a,b,c){c.d(b,{Z:function(){return ah}});var d=c(47568),e=c(26042),f=c(69396),g=c(29815),h=c(34051),i=c.n(h),j=c(85893),k=c(60536),l=c.n(k),m=c(67294),n=c(25617),o=c(86455),p=c.n(o),q=c(9308),r=c(80686),s=c(15342),t=c(57966),u=c(48729),v=c(39343),w=function(a){var b,c=a.requireReservation,d=a.price,e=a.priceTBD,f=a.fees,g=a.hasFreeBooking,h=a.isForClient,i=a.maxReservationCost,j=a.minimumAmount,k=a.countryID,l=u.hW.find(function(a){return a.code===k}).reservationProvider;return c&&h&&f&&!g&&(0!==d||0!==j)&&0!==i||(b=!1),c&&h&&f&&!g&&(d>0||j>0&&!(0===d&&!e))&&i>0&&(b=!0),{needsReservation:b,reservationProvider:l}},x=w,y=c(68691),z=c(73860),A=c(83556),B=c(37222),C=c(5152),D=c.n(C),E=c(69528),F=c(84810),G=c(50534),H=c(64521),I=c(52784),J=c(55913),K=c(77422),L=function(a){var b=a.appointment,c=a.companyId,d=a.index,g=a.editing,h=a.setSelectedTab,i=b||{},k=i.service,m=i.price,o=i.currency,p=i.countryLocale,q=i.selectedMember,r=i.selectedDay,u=i.selectedMonth,v=i.selectedYear,w=i.selectedHour,x=i.selectedMinute,y=i.user,z=i.tzDifference,A=(0,s.Z)({form:"cart"}),B=A.formState,C=A.setFormProperties,D=A.updateArrayProperty,L=(0,F.Z)({user:y}),M=(0,n.I0)(),N=((null==q?void 0:q.stores[0])||{}).address,O=N||{},P=O.formattedAddress,Q=O.location;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{style:{minHeight:["Online","A domicilio"].includes(null==k?void 0:k.modality)?"8rem":"auto"},className:"jsx-8f84a7e0e6ce9ea posr br5 bsh p5 pr7 pl7 mb10 w100p app-cart-item",children:[(0,j.jsxs)("div",{className:"jsx-8f84a7e0e6ce9ea",children:[!g&&(0,j.jsx)("div",{onClick:function(){h("Turno 1");var a,b=null==B?void 0:null===(a=B.appointments)|| void 0===a?void 0:a.filter(function(a,b){return b!==d});D({arrayField:"appointments",replacingArray:b}),localStorage.setItem(c,JSON.stringify((0,f.Z)((0,e.Z)({},B),{appointments:b}))),(null==b?void 0:b.length)===0&&(localStorage.removeItem(c),localStorage.removeItem("cartTime"),C({data:{fees:!1}}),M((0,t.Cp)()))},style:{zIndex:4},className:"jsx-8f84a7e0e6ce9ea posa r13 b9 cursorp",children:(0,j.jsx)("i",{className:"jsx-8f84a7e0e6ce9ea fas fa-trash cred"})}),(0,j.jsxs)("div",{className:"jsx-8f84a7e0e6ce9ea df aic jcsb w100p mb5 mt-4",children:[(0,j.jsx)(K.Z,{src:null==y?void 0:y.pictureUrl,text:L,trimWidth:"8rem",mt:"0.5rem"}),(0,j.jsx)(H.Z,{formatting:"dd/MM/yy HH:mm",fd:"row",clockMarginRight:"0.3rem",start:{year:v,month:u,day:r,minute:x,hour:w},tzDifference:z})]}),(0,j.jsxs)("div",{className:"jsx-8f84a7e0e6ce9ea df aic jcsb w100p mt-3",children:[(0,j.jsx)(J.Z,{icon:"fas fa-concierge-bell",text:null==k?void 0:k.name,trimWidth:"18rem",trimWidthMobile:"48vw",clarification:(0,E.Z)({service:k}),tooltipName:"service-appointment-to-be-reserved",tooltipText:"".concat(null==k?void 0:k.name," ").concat((0,E.Z)({service:k}))}),(0,j.jsx)(I.Z,{price:m,priceTBD:k.priceTBD,countryLocale:p,currency:o,disabled:(null==b?void 0:b.discount)>0,mt:"-0.1rem"})]}),(null==k?void 0:k.modality)==="Presencial"&&(0,j.jsx)(J.Z,{icon:"fas fa-map-marker-alt",text:P,trimWidth:"22rem",trimWidthMobile:"70vw",padding:"0.8rem 0.5rem",tooltipName:"address-appointment-to-be-reserved",tooltipText:P,mt:"0.8rem",lat:null==Q?void 0:Q.coordinates[1],lng:null==Q?void 0:Q.coordinates[0]})]}),!(null==b?void 0:b.discount)&&m>0&&(0,j.jsxs)("div",{style:{width:"70%",margin:"1.5rem auto 0.5rem auto"},onClick:function(){M((0,t.Cp)()),C({data:{appointmentForCouponIndex:g?0:d}}),M((0,t.$Z)({modal:"promo-code"}))},className:"jsx-8f84a7e0e6ce9ea df aic jcc cursorp tac",children:[(0,j.jsx)("i",{className:"jsx-8f84a7e0e6ce9ea fas fa-ticket mr5 mt1  fs10 lh12 cblack"}),(0,j.jsx)("span",{className:"jsx-8f84a7e0e6ce9ea tac lh12 tdu cursorp",children:"Tengo c\xf3digo de descuento"})]}),(null==b?void 0:b.discountAmount)>0&&(0,j.jsx)(G.Z,{price:m,currency:o,fs:"1rem",countryLocale:p,discount:null==b?void 0:b.discount,discountAmount:null==b?void 0:b.discountAmount,code:null==b?void 0:b.couponCode})]}),(0,j.jsx)(l(),{id:"8f84a7e0e6ce9ea",children:".app-cart-item.jsx-8f84a7e0e6ce9ea{-webkit-border-radius:0 .5rem .5rem .5rem;-moz-border-radius:0 .5rem .5rem .5rem;border-radius:0 .5rem .5rem .5rem}"})]})},M=L,N=c(44248),O=c(70300),P=c(98400),Q=function(a){var b=a.appointments,c=a.companyId,d=(0,m.useState)("Turno 1"),e=d[0],f=d[1],g=b.map(function(a,b){return{text:"Turno ".concat(b+1),icon:"fas fa-calendar-alt",index:b}}),h=e.split(" ")[1]-1;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P.Z,{tabs:g,setSelectedTab:f,selectedTab:e,mt:"0.5rem"}),(0,j.jsx)(M,{appointment:b[h],companyId:c,index:h,setSelectedTab:f})]})},R=Q,S=D()(function(){return Promise.resolve().then(c.bind(c,16777))},{loadableGenerated:{webpack:function(){return[16777]}},ssr:!1}),T=function(a){var b,c,e=a.requireReservation,f=a.company,g=a.authRequired,h=a.editing,k=a.userWhatsapp,o=a.isForClient,q=a.whatsappProvided,r=a.userFromDB,w=a.minimumAmount,C=a.setShowAfter,D=a.memberId,E=(0,n.v9)(function(a){return null==a?void 0:a.auth}),F=E.user,G=(0,s.Z)({form:"cart"}),H=G.formState,I=G.execute,J=G.isLoading,K=H||{},L=K.appointments,P=K.reservationCost,Q=K.discountAmount,T=K.price,U=K.priceTBD,V=K.countryLocale,W=K.currency,X=K.fees,Y=K.hasFreeBooking,Z=K.clientAlreadyExists,$=K.generatePaymentLink,_=K.clientName,aa=K.phoneNumber,ab=(0,s.Z)({form:"appointment"}).formState,ac=(0,n.I0)(),ad=(b=(0,d.Z)(i().mark(function a(){var b,c,d,e,g,j,k,l,m,n;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!J){a.next=3;break}return a.abrupt("return");case 3:if(f._id&&o&&!h&&(localStorage.setItem(f._id,JSON.stringify(H)),localStorage.setItem("cartTime",JSON.stringify(new Date))),!am){a.next=8;break}return localStorage.setItem("whereToGoBack","".concat(location.href,"?cart=true&checkFreeBooking=true")),ac((0,t.$Z)({modal:"login-form"})),a.abrupt("return");case 8:if(c=f.reservationsConfig.minAnticipationForAutomaticRefund,!(((null==f?void 0:null===(b=f.termsAndConditions)|| void 0===b?void 0:b.length)>0||c>0)&&o)){a.next=39;break}for(d="",c>0&&(d+="<li style=\"margin-bottom: 0.5rem;\"><u><b class='cprim'>Reembolsos</b></u>: solo anulando m\xednimo ".concat(c," horas antes del turno.</li>")),e=!0,g=!1,j=void 0,a.prev=13,k=f.termsAndConditions[Symbol.iterator]();!(e=(l=k.next()).done);e=!0)m=l.value,d+='<li style="margin-bottom: 0.5rem;">'.concat(m,"</li>");a.next=21;break;case 17:a.prev=17,a.t0=a.catch(13),g=!0,j=a.t0;case 21:a.prev=21,a.prev=22,e||null==k.return||k.return();case 24:if(a.prev=24,!g){a.next=27;break}throw j;case 27:return a.finish(24);case 28:return a.finish(21);case 29:return a.next=31,p().fire({title:"\xa1Importante!",html:'\n        <head>\n        <style>\n        @media screen and (max-width: 650px) {\n        .tyc-container {\n          margin: 0.75rem 0.5rem 0.2rem 0.5rem;\n          }\n        }\n        </style>\n        </head>\n        <body>\n\n        <div style="display: flex; flex-direction: column; margin: 0 ;">\n\n        <p>Al reservar tu turno aceptas los siguientes t\xe9rminos y condiciones de <b>'.concat(f.name,"</b>:</p> ").concat('<ol style="text-align: left; width: 100%; margin: 0;">'+d+"</ol></div>","\n        </body>"),icon:"",confirmButtonText:"Aceptar t\xe9rminos y condiciones",showCancelButton:!0,cancelButtonText:"Cerrar",padding:"0.6rem",customClass:{htmlContainer:"tyc-container"}});case 31:if(!(n=a.sent).isConfirmed){a.next=36;break}ae(),a.next=37;break;case 36:return a.abrupt("return");case 37:a.next=40;break;case 39:ae();case 40:case"end":return a.stop()}},a,null,[[13,17,21,29],[22,,24,28]])})),function(){return b.apply(this,arguments)}),ae=(c=(0,d.Z)(i().mark(function a(){var b,c,d,j,l,m,n,s;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=null==L?void 0:L.some(function(a){var b;return(null==a?void 0:null===(b=a.service)|| void 0===b?void 0:b.modality)==="A domicilio"}),d=null==f?void 0:null===(b=f.reservationsConfig)|| void 0===b?void 0:b.healthInsuranceRequired,j=(null==k?void 0:k.phoneNumber)||(null==F?void 0:F.phoneNumber),l=(null==r?void 0:r.personalId)||(null==F?void 0:F.personalId),m=(null==r?void 0:r.insuranceNumber)||(null==F?void 0:F.insuranceNumber),n=(null==r?void 0:r.healthInsurance)||(null==F?void 0:F.healthInsurance),!(o&&!h&&(!j||!(null==F?void 0:F.firstname)||!(null==F?void 0:F.lastname)||c||f.personalIdRequired&&!l||d&&(!m||!n))&&!q&&(g|| !g&&F&&(!(null==F?void 0:F.firstname)||!(null==F?void 0:F.lastname)||!(null==F?void 0:F.phoneNumber)||c||f.personalIdRequired&&!l||d&&(!m||!n))))){a.next=14;break}return ac((0,t.Cp)()),a.next=11,p().fire({title:"Acci\xf3n requerida",html:"\n        ".concat(d&&(null==f?void 0:f._id)==="640bcc9a106f2ab7f7f3c0a3"?"</br></br>Por favor, indicar los datos de <b> obra social/prepaga</b>.</br></br> ":"","\n        ").concat(c?"N":"Por <b>\xdaNICA VEZ</b> n","ecesitamos que completes tus datos de contacto.</br></br> \n         Esto le permitir\xe1 a la empresa prestadora del servicio contactarte ante cualquier inconveniente."),confirmButtonText:"Entendido",icon:"info"});case 11:case 18:case 26:return C("complete-whatsapp"),ac((0,t.$Z)({modal:"complete-whatsapp"})),a.abrupt("return");case 14:if(!(!o&&!h&&!Z)){a.next=21;break}return ac((0,t.Cp)()),a.next=18,p().fire({title:"".concat((0,N.Z)(f.coreBusiness,!0)," nuevo"),html:"\n         Este ".concat((0,N.Z)(f.coreBusiness)," no existe en la base de datos, por lo tanto tienes la posibilidad de completar sus datos de contacto.</br></br> \n         Esto le permitir\xe1 a tu empresa contactar al ").concat((0,N.Z)(f.coreBusiness)," directamente desde la aplicaci\xf3n, e identificarlo por Nombre y Apellido y no solo por su email.\n         "),confirmButtonText:"Entendido",icon:"info"});case 21:if(!h){a.next=34;break}if(!(c&&o&&!(null==F?void 0:F.address))){a.next=29;break}return ac((0,t.Cp)()),a.next=26,p().fire({title:"Acci\xf3n requerida",html:"\n          Necesitamos que completes tus datos de contacto.</br></br>\n           Esto le permitir\xe1 a la empresa prestadora del servicio contactarte ante cualquier inconveniente.\n           ",confirmButtonText:"Entendido",icon:"info"});case 29:return s=ab.appointmentId||JSON.parse(localStorage.getItem("appointmentToEdit")).appointmentId,a.next=32,I({path:"appointments/".concat(s,"?companyId=").concat(f._id,"&editingAsClient=").concat(o,"&generatePaymentLink=").concat($),editing:h,requireReservation:e});case 32:return ac((0,t.Cp)()),a.abrupt("return");case 34:if(!(aj&&o)){a.next=41;break}return a.next=37,I({path:"appointments?companyId=".concat(f._id,"&creatingAsClient=").concat(o),requireReservation:e,reservationsConfig:f.reservationsConfig});case 37:case 44:case 51:return localStorage.removeItem(f._id),localStorage.removeItem("cartTime"),localStorage.removeItem("loginCodeEmail"),a.abrupt("return");case 41:if(!(o&&(!e||!X||Y||0==(T-Q||0)||!X))){a.next=48;break}return a.next=44,I({path:"appointments?companyId=".concat(f._id,"&creatingAsClient=").concat(o)});case 48:if(!(!o&&Z)){a.next=55;break}return a.next=51,I({path:"appointments?companyId=".concat(f._id,"&creatingAsClient=").concat(o,"&generatePaymentLink=").concat($),requireReservation:e,memberId:D});case 55:case"end":return a.stop()}},a)})),function(){return c.apply(this,arguments)}),af=P>(T-Q||0)&&T>0?T-(Q||0):P,ag=(0,v.Z)({locale:V,forceLocale:!0,currencyCode:W,amount:af}),ah=(0,v.Z)({locale:V,forceLocale:!0,currencyCode:W,amount:T-Q}),ai=x({requireReservation:e,price:T,priceTBD:U,isForClient:o,fees:X,hasFreeBooking:Y,maxReservationCost:af,minimumAmount:w,countryID:f.countryID}),aj=ai.needsReservation,ak=ai.reservationProvider;(0,m.useEffect)(function(){q&&ae(),localStorage.getItem("loginCodeEmail")&&o&&am&&ac((0,t.$Z)({modal:"login-form"}))},[]);var al=(null==L?void 0:L.length)>1?"S":"",am=g&&!F|| !g&&(!_||!aa)&&!F;return console.log({finalFormattedCost:ag}),console.log({finalFormattedPrice:ah}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df jcsb w100p",children:(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df fdc w100p",children:[(0,j.jsxs)("div",{style:{borderBottom:"1px dashed var(--greyDarkest)"},className:"jsx-f9a63737aa837443 df aic jcsb mb5 pl2 pb5",children:[(0,j.jsxs)(A.Z,{ta:"center",fsm:"1.4rem",children:["TURNO".concat(al," A RESERVAR")," ",(null==L?void 0:L.length)>1?" (".concat(null==L?void 0:L.length,")"):""]}),(0,j.jsx)("h2",{className:"jsx-f9a63737aa837443 cblue mr3",children:ah})]}),!h&&(0,j.jsx)(R,{appointments:L,companyId:f._id}),h&&(0,j.jsx)(M,{appointment:ab,index:0,editing:h}),(q||_)&&!(Q>0)&&(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df aic jcc mt10 mb10",children:(0,j.jsxs)("span",{className:"jsx-f9a63737aa837443",children:[(0,j.jsx)("i",{className:"jsx-f9a63737aa837443 fas fa-check-circle mr5 cprice"}),o?"Datos de contacto actualizados!":(0,N.Z)(null==f?void 0:f.coreBusiness,!0)+" creado con \xe9xito!"]})}),aj&&(0,j.jsxs)("p",{className:"jsx-f9a63737aa837443 tac cred mt15 mb20",children:[(0,j.jsx)("i",{className:"jsx-f9a63737aa837443 fas fa-exclamation-circle mr3"}),(0,j.jsx)("b",{className:"jsx-f9a63737aa837443",children:"Se\xf1a obligatoria"})]}),!X&&e&&P>0&&!o&&(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic jcc mt10 mb20",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/mercado-pago.png"),width:"1.3rem",height:"1.3rem",widthOnMobile:"1.3rem",heightOnMobile:"1.3rem",marginRight:"0.5rem"}),(0,j.jsx)(B.Z,{form:"cart",text:"Generar link/s de pago",jc:"center",spanMR:"0.5rem",width:"auto",widthOnMobile:"auto",propertyToUpdate:"generatePaymentLink"})]}),(0,j.jsx)(O.Z,{rows:2,styles:{backgroundColor:"white",boxShadow:"0 1px 3px grey"},form:"cart",propertyToUpdate:"comment",placeholder:o?"Aclaraciones para el profesional/empresa...":"Aclaraciones...",mb:"0.5rem",mt:"0.5rem"}),!aj&&(0,j.jsx)(S,{onClick:ad,className:"pulse",children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df aic jcc fwb w100p fs11",children:J?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic jcc",children:[(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5 mr7",children:h?"EDITANDO...":"RESERVANDO..."}),(0,j.jsx)(z.Z,{small:!0,height:"1rem"})]}):(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5",children:am?(0,j.jsxs)("span",{className:"jsx-f9a63737aa837443",children:[(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 cgold",children:"AUTENTICARME"})," ",(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 mr3 ml3",children:"y"})," RESERVAR"]}):"".concat(h?"MODIFICAR":"RESERVAR"," TURNO").concat(al)})})}),aj&&"ARS"===W&&(0,j.jsx)("div",{className:"jsx-f9a63737aa837443",children:(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df fdc w100p",children:[(0,j.jsx)(S,{onClick:ad,backgroundColor:"--blueMP",className:"pulse",children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df aic jcc fs11 ",children:J?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic jcc",children:[(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5 mr7",children:"REDIRIGIENDO..."}),(0,j.jsx)(z.Z,{small:!0,height:"1rem"})]}):(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5",children:am?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 cgold",children:"AUTENTICARME"})," ",(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 mr5 ml3",children:"y"})," ",(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/mercado-pago.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})]}):(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/mercado-pago.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})})})}),(0,j.jsxs)("small",{className:"jsx-f9a63737aa837443 mt5 cgreydarkest",children:[(0,j.jsx)("b",{className:"jsx-f9a63737aa837443",children:(0,j.jsx)("u",{className:"jsx-f9a63737aa837443",children:"Medios de pago"})}),": tarjeta de cr\xe9dito/d\xe9bito, saldo en Mercado Pago o efectivo en Rapipago."]})]})}),aj&&"Stripe"===ak&&(0,j.jsx)("div",{className:"jsx-f9a63737aa837443",children:(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df fdc w100p fs11",children:[(0,j.jsx)(S,{onClick:ad,backgroundColor:"--stripeBackground",className:"pulse",children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df aic jcc ",children:J?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic jcc ",children:[(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5 mr7",children:"REDIRIGIENDO..."}),(0,j.jsx)(z.Z,{small:!0,height:"1rem"})]}):(0,j.jsxs)("p",{className:"jsx-f9a63737aa837443 mt5 mb5",children:[" ",am?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 cgold",children:"AUTENTICARME"})," ",(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 mr5 ml3",children:"y"})," ",(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/stripe.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})]}):(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/stripe.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})]})})}),(0,j.jsxs)("small",{className:"jsx-f9a63737aa837443 mt5 cgreydarkest",children:[(0,j.jsx)("b",{className:"jsx-f9a63737aa837443",children:(0,j.jsx)("u",{className:"jsx-f9a63737aa837443",children:"Medios de pago"})}),": tarjeta de cr\xe9dito/d\xe9bito, saldo en Mercado Pago o efectivo en Rapipago."]})]})}),aj&&("PayPal"===ak||"Mercado Pago"===ak&&"ARS"!==W)&&(0,j.jsx)("div",{className:"jsx-f9a63737aa837443",children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df fdc w100p",children:(0,j.jsx)(S,{styles:{marginBottom:"0.1rem"},onClick:ad,className:"pulse",backgroundColor:"--bluePayPal",children:(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 df aic jcc fs11",children:J?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic jcc",children:[(0,j.jsx)("p",{className:"jsx-f9a63737aa837443 mt5 mb5 mr7",children:"REDIRIGIENDO..."}),(0,j.jsx)(z.Z,{small:!0,height:"1rem"})]}):(0,j.jsxs)("p",{className:"jsx-f9a63737aa837443 mt5 mb5",children:[" ",am?(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 cgold",children:"AUTENTICARME"})," ",(0,j.jsx)("div",{className:"jsx-f9a63737aa837443 mr5 ml3",children:"y"})," ",(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/paypal.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})]}):(0,j.jsxs)("div",{className:"jsx-f9a63737aa837443 df aic",children:[(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/paypal.png"),width:"2rem",height:"2rem",widthOnMobile:"1.5rem",heightOnMobile:"1.5rem",marginRight:"0.5rem"}),ag===ah?"ABONAR TOTAL ":"ABONAR SE\xd1A ","(",ag,")"]})]})})})})}),!h&&(0,j.jsxs)("div",{onClick:function(){ac((0,t.Cp)()),window.scroll({top:0,behavior:"smooth"}),ac((0,t.$Z)({modal:"service"}))},className:"jsx-f9a63737aa837443 w100p df aic jcc mt8 mb5 cursorp add-other-service ",children:[(0,j.jsx)("i",{className:"jsx-f9a63737aa837443 fa-duotone fa-circle-plus mr5 fs8"}),(0,j.jsx)("span",{className:"jsx-f9a63737aa837443 tac tdu",children:"A\xf1adir otro servicio"})]})]})})}),(0,j.jsx)(l(),{id:"f9a63737aa837443",children:".promo-code.jsx-f9a63737aa837443:hover{color:var(--primColor);cursor:pointer}.address-trimmed.jsx-f9a63737aa837443{margin:0;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;max-width:19rem}.add-other-service.jsx-f9a63737aa837443:hover{color:var(--primColor)}@media screen and (max-width:650px){.address-trimmed.jsx-f9a63737aa837443{max-width:14rem}.swal-html-container.jsx-f9a63737aa837443{margin:.75rem .5rem .2rem .5rem!important}}"})]})},U=T,V=c(88349),W=c(76354),X=c(80302),Y=c(36956),Z=c(16777),$=c(4586),_=c(28078),aa=c(28142),ab=c(91905),ac=function(a){var b=a.countryCode,c=(a.setWhatsappProvided,a.clientName),d=a.phoneNumber,e=a.validPhone,f=a.unauthClientEmail,g=(0,n.I0)(),h=(0,m.useState)(!1),i=h[0],k=h[1];return(0,j.jsxs)(j.Fragment,{children:[!i&&(0,j.jsxs)("div",{className:"df fdc aic jcc",style:{padding:"1rem"},children:[(0,j.jsx)("h2",{className:"mb15",children:"INFORMACI\xd3N B\xc1SICA"}),(0,j.jsx)($.Z,{type:"text",form:"cart",propertyToUpdate:"clientName",placeholder:"Nombre y apellido",mb:"0.5rem",autoFocus:!0}),(0,j.jsxs)("div",{className:"df aife mt10 h26 w100p mb15",children:[(0,j.jsx)("div",{className:"df aic h100p",children:(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/socials/whatsapp.png"),border:"none",borderRadius:"0",marginRight:"0.8rem",width:"1.8rem",height:"1.8rem"})}),(0,j.jsx)(X.Z,{form:"cart",geoCountry:b||"AR",setShowSelector:k}),(0,j.jsx)(V.Z,{type:"tel",form:"cart",countryCode:b,label:"C\xf3digo + n\xfamero",placeholder:"C\xf3digo + n\xfamero",width:"100%",widthOnMobile:"100%",countChanges:!0,inputMode:"numeric",height:"100%",mb:"0",mr:"0",pr:"0"})]}),(0,j.jsx)($.Z,{form:"cart",propertyToUpdate:"unauthClientEmail",width:"100%",widthOnMobile:"100%",label:"Email (ideal para recibir recordatorio)",placeholder:"Ingresa tu email",type:"email",id:"email",autocomplete:"email",trimOnChange:!0,removeDiacritics:!0}),(0,j.jsx)(Z.default,{width:"100%",mt:"2rem",className:"pulse",onClick:function(){var a=!f||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f);if(!(null==c?void 0:c.trim())||!d||!e){p().fire({html:"<p>Debes indicar al menos tu nombre y un tel\xe9fono v\xe1lido.</p>",confirmButtonText:"Entendido",icon:"info"});return}if(!a){p().fire({html:"<p>El email ingresado no tiene un formato v\xe1lido, deber\xedas corregirlo o no indicar un email.</p>",confirmButtonText:"Entendido",icon:"info"});return}g((0,t.Cp)()),g((0,t.$Z)({modal:"appointment-to-be-reserved"}))},children:(0,j.jsx)("p",{className:"mt5 mb5 fs12",children:" GUARDAR CAMBIOS"})})]}),i&&(0,j.jsx)("div",{className:"posa t10 l10 df fdc aic jcc br5 bs",style:{zIndex:1e7,backgroundColor:"white",width:"27rem",maxWidth:"95%",left:window.innerWidth<450?"0.5rem":"calc(50% - 13.5rem)"},children:(0,j.jsx)(Y.Z,{setShowSelector:k,form:"cart"})})]})},ad=ac,ae=c(1478),af=c(40244),ag=function(a){var b,c,h,k,o,v,w=a.requireReservation,x=a.minimumAmount,A=a.company,B=a.text,C=a.editing,D=a.isForClient,E=a.userWhatsapp,F=a.geoCountry,G=a.userFromDB,H=a.memberId,I=a.hasAtHomeService,J=(0,m.useState)(!1),K=J[0],L=J[1],M=(0,m.useState)(""),O=M[0],P=M[1],Q=(0,m.useState)(!1),R=Q[0],S=Q[1],T=(0,n.v9)(function(a){return null==a?void 0:a.auth}).user,ac=(0,s.Z)({form:"appointment"}),ag=ac.formState,ah=ac.clearForm,ai=ac.setFormProperties,aj=(0,s.Z)({form:"cart",companyId:null==A?void 0:A._id}),ak=aj.formState,al=aj.updateArrayProperty,am=aj.setFormProperties,an=(0,s.Z)({form:"user",shouldCleanForm:!0}),ao=an.formState,ap=an.setFormProperties,aq=ag||{},ar=aq.selectedHourBlock,as=aq.price,at=aq.service,au=ak||{},av=au.clientEmail,aw=au.knowsEmail,ax=au.fees,ay=(0,n.I0)(),az=(h=(0,d.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:C&&(al({arrayField:"appointments",replacingArray:[ag]}),am({data:{show:!0,currency:ag.service.currency,countryLocale:ag.service.countryLocale}})),ay((0,t.$Z)({modal:"appointment-to-be-reserved"}));case 2:case"end":return a.stop()}},a)})),function(){return h.apply(this,arguments)}),aA=(k=(0,d.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:al({arrayField:"appointments",itemToInclude:(0,f.Z)((0,e.Z)({},ag),{reservationCost:(0,q.Z)(as,at.priceTBD,x,at.fee,A.currency)})}),am({data:{fees:ax||at.fee>0&&!!at.fee&&w&&D,hasFreeBooking:ag.hasFreeBooking,priceTBD:ak.priceTBD||ag.priceTBD}}),ah(),ay((0,t.$Z)({modal:"appointment-to-be-reserved"})),am({data:{show:!0,currency:ag.service.currency,countryLocale:ag.service.countryLocale}});case 5:case"end":return a.stop()}},a)})),function(){return k.apply(this,arguments)}),aB=(o=(0,d.Z)(i().mark(function a(){var b,c,d,g,h,j,k,l,m;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!D){a.next=43;break}if(!(!ao.firstname||!ao.lastname||!ao.phoneNumber||I&&!ao.address||(null==T?void 0:null===(b=T.email)|| void 0===b?void 0:b.includes("@tuturno.io"))&&!ao.email||A.personalIdRequired&&!ao.personalId||(null==A?void 0:null===(c=A.reservationsConfig)|| void 0===c?void 0:c.healthInsuranceRequired)&&(!ao.insuranceNumber||!ao.healthInsuranceSelected))){a.next=7;break}return a.next=6,p().fire({title:"\xa1UPS!",html:"<p>Debes completar:<br><br>".concat((null==T?void 0:null===(d=T.email)|| void 0===d?void 0:d.includes("@0tuturno.io"))?" <b>email</b><br> ":" ").concat(ao.firstname?"":" <b>Nombre</b><br> ").concat(ao.lastname?"":" <b>Apellido</b><br> "," ").concat(ao.phoneNumber?"":" <b>Tel\xe9fono de contacto</b><br>").concat(ao.personalId?"":" <b>DNI</b><br> ").concat((null==A?void 0:null===(g=A.reservationsConfig)|| void 0===g?void 0:g.healthInsuranceRequired)&&!ao.healthInsuranceSelected?" <b>Obra social/Prepaga</b><br> ":"").concat((null==A?void 0:null===(h=A.reservationsConfig)|| void 0===h?void 0:h.healthInsuranceRequired)&&!ao.insuranceNumber?" <b>N\xfamero</b> de Obra social/Prepaga<br> ":"").concat(I&&!ao.address?" <b>Domicilio</b><br><br> Es fundamental que indiques el domicilio en donde se prestar\xe1 el servicio ":"","</p>"),icon:"info",confirmButtonText:"\xa1Entendido!"});case 6:case 10:case 15:case 59:return a.abrupt("return");case 7:if(!(ao.phoneNumber&&!ao.validPhone)){a.next=11;break}return a.next=10,p().fire({title:"\xa1UPS!",html:"<p>El n\xfamero de tel\xe9fono ingresado pareciera ser inv\xe1lido.</p>",icon:"info"});case 11:if(!(!(j=/^[\d]{1,2}\.?[\d]{3,3}\.?[\d]{3,3}$/g.test(ao.personalId))&&A.personalIdRequired)){a.next=16;break}return a.next=15,p().fire({title:"\xa1UPS!",html:"<p>El DNI ingresado es inv\xe1lido.</p>",icon:"info"});case 16:return a.prev=16,L(!0),a.next=20,(0,r.H)("/users/phone/".concat(T.sub),"PUT",(0,f.Z)((0,e.Z)({},ao),{originalEmail:T.email}));case 20:return k=a.sent,a.next=23,(0,r.H)("/auth/refresh-token");case 23:if(l=a.sent,!(k.ok&&l)){a.next=28;break}localStorage.setItem("jwt",JSON.stringify(l)),ay((0,_.av)(l)),L(!1),ay((0,t.Cp)()),S(!0),ay((0,t.$Z)({modal:"appointment-to-be-reserved"})),a.next=32;break;case 28:return L(!1),ap({data:{email:""}}),a.next=32,p().fire("UPS",k.message,"info");case 32:a.next=41;break;case 34:return a.prev=34,a.t0=a.catch(16),L(!1),ay((0,t.Cp)()),console.log({error:a.t0}),a.next=41,p().fire("\xa1UPS!","Hubo un error al actualizar tu tel\xe9fono, intenta m\xe1s tarde.","warning");case 41:case 60:a.next=69;break;case 43:if(!K){a.next=45;break}return a.abrupt("return");case 45:if(ag.clientAlreadyExists){a.next=69;break}return a.prev=46,L(!0),a.next=50,(0,r.H)("/users/create/".concat(aw?av:"not-known"),"POST",ao);case 50:if(m=a.sent,L(!1),ay((0,t.Cp)()),!m.ok){a.next=57;break}am({data:{clientEmail:m.data}}),S(!0),am({data:{clientAlreadyExists:!0}}),ay((0,t.$Z)({modal:"appointment-to-be-reserved"})),a.next=60;break;case 57:return a.next=59,p().fire("\xa1UPS!",m.message,"info");case 62:return a.prev=62,a.t1=a.catch(46),L(!1),ay((0,t.Cp)()),console.log({error:a.t1}),a.next=69,p().fire("\xa1UPS!","Hubo un error al actualizar tu tel\xe9fono, intenta m\xe1s tarde.","warning");case 69:case"end":return a.stop()}},a,null,[[16,34],[46,62]])})),function(){return o.apply(this,arguments)}),aC=(v=(0,d.Z)(i().mark(function a(){var b,c,d,g,h,j,k,l,m,n,o,q,s;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ak.couponCode){a.next=2;break}return a.abrupt("return");case 2:return b=C?0:ak.appointmentForCouponIndex,c=ak.appointments[b],d=c.selectedMember,a.prev=5,L(!0),a.next=9,(0,r.H)("/coupons/coupon/code/".concat(encodeURI(ak.couponCode),"?companyId=").concat(d.company._id,"&appointmentId=").concat(c.appointmentId),"POST",{memberId:d._id,serviceId:null==c?void 0:c.service._id,selectedDay:null==c?void 0:c.selectedDay,selectedMonth:null==c?void 0:c.selectedMonth,selectedYear:null==c?void 0:c.selectedYear,selectedHour:null==c?void 0:c.selectedHour,selectedMinute:null==c?void 0:c.selectedMinute});case 9:if(!(null==(g=a.sent)?void 0:g.ok)){a.next=24;break}return h=g.data/100,j=ak.appointments.map(function(a,b){if(b===ak.appointmentForCouponIndex){var c=(0,aa.Z)(null==a?void 0:a.price,h,null==a?void 0:a.currency);return(0,f.Z)((0,e.Z)({},a),{discount:h,couponCode:ak.couponCode,discountAmount:c,reservationCost:a.reservationCost<=a.price-c?a.reservationCost:a.price-c})}return a}),C&&(l=(k=j[0]).discount,m=k.couponCode,n=k.discountAmount,o=k.reservationCost,ai({data:{discount:l,couponCode:m,discountAmount:n,reservationCost:o<=(q=k.price)-n?o:q-n}})),s=j.reduce(function(a,b){return+a+ +b.reservationCost},0),al({arrayField:"appointments",replacingArray:j}),am({data:{reservationCost:s}}),L(!1),a.next=20,p().fire({title:"\xa1Listo!",html:"\n        <p>Tu c\xf3digo fue aplicado con \xe9xito</p>\n        <p>\xa1Obtuviste un <b>".concat(100*h,"%</b> de descuento! &#128640;</p>\n        "),icon:"success",confirmButtonText:"\xa1Entendido! &#128513;"});case 20:ay((0,t.Cp)()),ay((0,t.$Z)({modal:"appointment-to-be-reserved"})),a.next=25;break;case 24:am({data:{discount:0,couponCode:"",discountAmount:0}}),p().fire("\xa1UPS!",null==g?void 0:g.message,"info"),L(!1);case 25:a.next=33;break;case 27:a.prev=27,a.t0=a.catch(5),am({data:{discount:0,couponCode:"",discountAmount:0}}),console.log({error:a.t0}),L(!1),p().fire({title:"\xa1UPS!",html:"Hubo un error al validar su c\xf3digo, por favor intente m\xe1s tarde.",icon:"error"});case 33:case"end":return a.stop()}},a,null,[[5,27]])})),function(){return v.apply(this,arguments)}),aD=function(a){(13===a.charCode||"Enter"===a.code||"click"===a.type)&&aC()};(0,m.useEffect)(function(){if(G){var a,b;ap({data:(0,f.Z)((0,e.Z)({},G),{phoneNumber:null==G?void 0:null===(a=G.whatsapp)|| void 0===a?void 0:a.phoneNumber,email:(null==G?void 0:null===(b=G.email)|| void 0===b?void 0:b.includes("@tuturno.io"))?"":null==G?void 0:G.email})})}},[G]),(0,m.useEffect)(function(){if(Array.isArray(ak.appointments)){var a=0,b=0,c=0,d={},e=!0,f=!1,h=void 0;try{for(var i,j=ak.appointments[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value;if(a+=k.price,b+=k.reservationCost,c+=k.discountAmount,Array.isArray(k.service.resources)){var l=!0,m=!1,n=void 0;try{for(var o,p,q=(null===(o=k.service)|| void 0===o?void 0:o.resources)[Symbol.iterator]();!(l=(p=q.next()).done);l=!0){var r=p.value,s=Array(r.blockingMinutesCount).fill().map(function(a,b){return k.selectedHourBlock+b}),t="".concat(k.selectedDay,"|").concat(k.selectedMonth,"|").concat(r._id);d[t]=d[t]?(0,g.Z)(d[t]).concat((0,g.Z)(s)):s}}catch(u){m=!0,n=u}finally{try{l||null==q.return||q.return()}finally{if(m)throw n}}}}}catch(v){f=!0,h=v}finally{try{e||null==j.return||j.return()}finally{if(f)throw h}}am({data:{count:ak.appointments.length,price:a,reservationCost:b,discountAmount:c,resourcesRequests:d}})}},[ak.appointments]);var aE=A.reservationsConfig.authRequired;return(0,j.jsxs)(j.Fragment,{children:[(ar||0===ar)&&(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df aic jcsb buttons w100p mt15",children:[!C&&(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5 df fdc w100p",children:(0,j.jsx)("button",{onClick:aA,className:"jsx-c73acbae8a72a0d5 reservation-button bcblue pulse",children:(0,j.jsxs)("span",{className:"jsx-c73acbae8a72a0d5 fs15",children:[(0,j.jsx)("i",{className:"jsx-c73acbae8a72a0d5 far fa-shopping-cart mr5"})," CONTINUAR"]})})}),C&&(0,j.jsx)("button",{onClick:az,className:"jsx-c73acbae8a72a0d5 reservation-button bcprim",children:(0,j.jsx)("span",{className:"jsx-c73acbae8a72a0d5",children:B})})]}),ak.show&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(W.Z,{modal:"appointment-to-be-reserved",padding:"0.75em",top:"8%",slideIn:!0,children:(0,j.jsx)(U,{requireReservation:w,authRequired:aE,company:A,editing:C,memberId:H,isForClient:D,userWhatsapp:E,whatsappProvided:R,userFromDB:G,setShowAfter:P,minimumAmount:x})}),(0,j.jsxs)(W.Z,{modal:"complete-whatsapp",width:"24rem",widthOnCellphone:"100%",form:"user",resetFields:{email:"",firstname:"",lastname:"",personalId:"",phoneNumber:""},children:[(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 w100p ohy maxh70vh",children:[(0,j.jsx)("h2",{className:"jsx-c73acbae8a72a0d5 tac mr15",children:"Datos de contacto"}),(null==T?void 0:null===(b=T.email)|| void 0===b?void 0:b.includes("@tuturno.io"))&&(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"Email",marginBottom:"0",form:"user",propertyToUpdate:"email",label:"Email"}),(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"Nombre/s",marginBottom:"0",form:"user",propertyToUpdate:"firstname",label:"Nombre/s"}),(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"Apellido/s",marginBottom:"0",form:"user",propertyToUpdate:"lastname",label:"Apellido/s"}),I&&(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"Domicilio donde se prestar\xe1 el servicio",marginBottom:"0",form:"user",propertyToUpdate:"address",label:"Domicilio donde se prestar\xe1 el servicio",countChanges:!0,autocomplete:"off"}),(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5",children:"Fecha de nacimiento"}),(0,j.jsx)($.Z,{spellcheck:"false",marginBottom:"0",form:"user",propertyToUpdate:"dob",type:"date"}),A.personalIdRequired&&(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"ARS"===A.currency?"DNI":"Documento",marginBottom:"0",form:"user",propertyToUpdate:"personalId",label:"ARS"===A.currency?"DNI":"Documento",labelDetails:" (requerido por ".concat(A.name,")"),countChanges:!0,trimOnChange:!0,unwantedCharacters:["."],autocomplete:"off"}),"640bcc9a106f2ab7f7f3c0a3"===A._id&&(null==A?void 0:null===(c=A.reservationsConfig)|| void 0===c?void 0:c.healthInsuranceRequired)&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(af.Z,{form:"user"})}),(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df aife mt10 mb5 h26",children:[(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5 df aic h100p",children:(0,j.jsx)(y.Z,{src:"".concat(u.vc.baseImageUrl,"/socials/whatsapp.png"),border:"none",borderRadius:"0 ",marginRight:"0.8rem",width:"1.8rem",height:"1.8rem"})}),(0,j.jsx)(X.Z,{form:"user",geoCountry:F||"AR"}),(0,j.jsx)(V.Z,{type:"tel",propertyToUpdate:"phoneNumber",form:"user",countryCode:(null==ao?void 0:ao.countryCode)||F,label:"C\xf3digo + n\xfamero",placeholder:"C\xf3digo + n\xfamero",width:"100%",widthOnMobile:"100%",countChanges:!0,inputMode:"numeric",height:"100%",mb:"0",pr:"0.3rem"})]})]}),(0,j.jsx)(Z.default,{onClick:aB,mt:"1.5rem",width:"100%",className:"pulse",children:K?(0,j.jsx)(z.Z,{small:!0}):D?"GUARDAR CAMBIOS y RESERVAR":"CREAR ".concat((0,N.Z)(null==A?void 0:A.coreBusiness)," y RESERVAR")})]}),(0,j.jsx)(W.Z,{modal:"country-codes",width:"25rem",top:"10%",children:(0,j.jsx)(Y.Z,{form:"user",showAfter:O})}),(0,j.jsxs)(W.Z,{top:"5%",modal:"login-form",width:"auto",maxWidth:"24rem",padding:"0.8rem 0.8rem 1.5rem 0.8rem",execOnBackClick:function(){return localStorage.removeItem("loginCodeEmail")},children:[(0,j.jsx)("h1",{className:"jsx-c73acbae8a72a0d5 tac mb0 mt5",children:"AUTENTICACI\xd3N"}),(0,j.jsx)("hr",{style:{width:"14rem",borderTop:"2px solid black"},className:"jsx-c73acbae8a72a0d5 mt-3 mb20"}),!aE&&(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5 df aic jcc w100p mb15 posr",children:(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df fdc aic jcc w100p posr mt5",children:[(0,j.jsxs)("span",{className:"jsx-c73acbae8a72a0d5 tac db fs14 hint mb-2",children:[(0,j.jsx)("b",{className:"jsx-c73acbae8a72a0d5 cblue",children:"Opci\xf3n A"}),":"," ",(0,j.jsx)("span",{className:"jsx-c73acbae8a72a0d5 ml5",children:"iniciando sesi\xf3n"})]}),(0,j.jsxs)("small",{style:{width:"14rem"},className:"jsx-c73acbae8a72a0d5 mt5 cprice fs9 tac lh10 ",children:["Tendr\xe1s recordatorios e ",(0,j.jsx)("br",{className:"jsx-c73acbae8a72a0d5"}),"historial de turnos"]})]})}),(0,j.jsx)(ab.Z,{autoFocus:!1,onLogin:function(){ay((0,t.$Z)({modal:"appointment-to-be-reserved"}))},cart:ak,companyId:A._id}),!aE&&(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5",children:[(0,j.jsx)("p",{style:{borderBottom:"1px dashed var(--greyDark)",margin:"1.5rem auto 1.75rem auto",width:"60%"},className:"jsx-c73acbae8a72a0d5 tac"}),(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df fdc aic jcc",children:[(0,j.jsx)("span",{className:"jsx-c73acbae8a72a0d5 asc db fs14 hint",children:(0,j.jsx)("b",{className:"jsx-c73acbae8a72a0d5 cblue",children:"Opci\xf3n B"})}),(0,j.jsxs)(ae.Z,{mt:"0.5rem",widthOnMobile:"95%",mb:"0.25rem",padding:"0.5rem 1rem",paddingOnMobile:"0.5rem 0.5rem",style:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.5)"},onClick:function(){return ay((0,t.$Z)({modal:"basic-info"}))},children:[(0,j.jsx)("i",{className:"jsx-c73acbae8a72a0d5 fa-regular fa-user-unlock mr7"}),(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5 df fdc mt7 mb7 w100p posr",children:(0,j.jsx)("p",{style:{fontFamily:"Roboto"},className:"jsx-c73acbae8a72a0d5 tac m0 fs12 ",children:"CON NOMBRE y TEL\xc9FONO"})})]})]})]})]}),(0,j.jsx)(W.Z,{top:"8%",modal:"basic-info",width:"auto",maxWidth:"24rem",padding:"0rem",form:"cart",resetFields:{clientName:"",phoneNumber:"",validPhone:"",unauthClientEmail:""},children:(0,j.jsx)(ad,{countryCode:(null==ao?void 0:ao.countryCode)||F,setWhatsappProvided:S,clientName:null==ak?void 0:ak.clientName,phoneNumber:null==ak?void 0:ak.phoneNumber,validPhone:null==ak?void 0:ak.validPhone,unauthClientEmail:null==ak?void 0:ak.unauthClientEmail})})]}),(0,j.jsx)(W.Z,{modal:"promo-code",width:"24rem",widthOnCellphone:"100%",children:(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df fdc aic jcc",children:[(0,j.jsxs)("h2",{className:"jsx-c73acbae8a72a0d5 mb15",children:[(0,j.jsx)("i",{className:"jsx-c73acbae8a72a0d5 fas fa-ticket mr7 mt1 fs13 cblack lh10"}),"Inserta tu c\xf3digo"]}),(0,j.jsx)($.Z,{spellcheck:"false",placeholder:"C\xf3digo de cup\xf3n",marginBottom:"0",width:"30rem",form:"cart",propertyToUpdate:"couponCode",autocomplete:"off",type:"text",label:"C\xf3digo de cup\xf3n",onlyLetters:!0,toLowerOnChange:!0,autoFocus:!0,onKeyPress:aD}),(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 buttons-container w100p",children:[(0,j.jsx)(Z.default,{width:"100%",widthOnCellphone:"100%",onClick:aC,children:(0,j.jsx)("div",{className:"jsx-c73acbae8a72a0d5 df aic jcc",children:K?(0,j.jsxs)("div",{className:"jsx-c73acbae8a72a0d5 df aic jcc",children:[(0,j.jsx)("span",{className:"jsx-c73acbae8a72a0d5 mr7",children:"Validando..."})," ",(0,j.jsx)(z.Z,{small:!0,width:"2.5rem"})]}):(0,j.jsx)("span",{className:"jsx-c73acbae8a72a0d5",children:"Aplicar cup\xf3n"})})}),(0,j.jsx)(Z.default,{width:"100%",widthOnCellphone:"100%",backgroundColor:"--grey",mt:"0.5rem",color:"--black",className:"usnone",onClick:function(){return ay((0,t.$Z)({modal:"appointment-to-be-reserved"}))},children:"Cerrar"})]})]})}),(0,j.jsx)(l(),{id:"c73acbae8a72a0d5",children:".buttons.jsx-c73acbae8a72a0d5{position:-webkit-sticky;position:sticky;bottom:.75rem}.reservation-button.jsx-c73acbae8a72a0d5{color:white;width:100%;padding:1rem 0;border:none;outline:none;font-size:1.2rem;-webkit-border-radius:.3rem;-moz-border-radius:.3rem;border-radius:.3rem;cursor:pointer}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}50%{-webkit-transform:scale(1.02);transform:scale(1.02);-webkit-box-shadow:0 10px 20px rgba(0,0,0,.5);box-shadow:0 10px 20px rgba(0,0,0,.5)}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}}@-moz-keyframes pulse{0%{-moz-transform:scale(1);transform:scale(1);-moz-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}50%{-moz-transform:scale(1.02);transform:scale(1.02);-moz-box-shadow:0 10px 20px rgba(0,0,0,.5);box-shadow:0 10px 20px rgba(0,0,0,.5)}100%{-moz-transform:scale(1);transform:scale(1);-moz-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}}@-o-keyframes pulse{0%{-o-transform:scale(1);transform:scale(1);box-shadow:0 0 0 rgba(0,0,0,0)}50%{-o-transform:scale(1.02);transform:scale(1.02);box-shadow:0 10px 20px rgba(0,0,0,.5)}100%{-o-transform:scale(1);transform:scale(1);box-shadow:0 0 0 rgba(0,0,0,0)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 rgba(0,0,0,0);-moz-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}50%{-webkit-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);transform:scale(1.02);-webkit-box-shadow:0 10px 20px rgba(0,0,0,.5);-moz-box-shadow:0 10px 20px rgba(0,0,0,.5);box-shadow:0 10px 20px rgba(0,0,0,.5)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 rgba(0,0,0,0);-moz-box-shadow:0 0 0 rgba(0,0,0,0);box-shadow:0 0 0 rgba(0,0,0,0)}}.pulse.jsx-c73acbae8a72a0d5{-webkit-animation:pulse 1.5s infinite,shine 2s infinite;-moz-animation:pulse 1.5s infinite,shine 2s infinite;-o-animation:pulse 1.5s infinite,shine 2s infinite;animation:pulse 1.5s infinite,shine 2s infinite}@-webkit-keyframes bounce{0%,20%,50%,80%,100%{-webkit-transform:translateY(-15%);transform:translateY(-15%)}40%{-webkit-transform:translateY(-50%);transform:translateY(-50%)}60%{-webkit-transform:translateY(-30%);transform:translateY(-30%)}}@-moz-keyframes bounce{0%,20%,50%,80%,100%{-moz-transform:translateY(-15%);transform:translateY(-15%)}40%{-moz-transform:translateY(-50%);transform:translateY(-50%)}60%{-moz-transform:translateY(-30%);transform:translateY(-30%)}}@-o-keyframes bounce{0%,20%,50%,80%,100%{-o-transform:translateY(-15%);transform:translateY(-15%)}40%{-o-transform:translateY(-50%);transform:translateY(-50%)}60%{-o-transform:translateY(-30%);transform:translateY(-30%)}}@keyframes bounce{0%,20%,50%,80%,100%{-webkit-transform:translateY(-15%);-moz-transform:translateY(-15%);-o-transform:translateY(-15%);transform:translateY(-15%)}40%{-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%)}60%{-webkit-transform:translateY(-30%);-moz-transform:translateY(-30%);-o-transform:translateY(-30%);transform:translateY(-30%)}}.hint.jsx-c73acbae8a72a0d5{-webkit-transform:translateY(-5%);-moz-transform:translateY(-5%);-ms-transform:translateY(-5%);-o-transform:translateY(-5%);transform:translateY(-5%);-webkit-animation:bounce 1.5s infinite;-moz-animation:bounce 1.5s infinite;-o-animation:bounce 1.5s infinite;animation:bounce 1.5s infinite;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;animation-fill-mode:both}.cart-circle.jsx-c73acbae8a72a0d5{height:4.45rem}button.jsx-c73acbae8a72a0d5{cursor:pointer}@media screen and (max-width:700px){.reservation-button.jsx-c73acbae8a72a0d5{max-width:100vw;margin-left:0!important;bottom:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.fa-user-unlock.jsx-c73acbae8a72a0d5{margin-left:.5rem}}"})]})},ah=ag},25357:function(a,b,c){var d=c(85893),e=c(60536),f=c.n(e);c(67294);var g=function(a){var b=a.onClick;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{onClick:b,className:"jsx-f4bb48e980ebe674 df aic cursorp",children:[(0,d.jsx)("i",{className:"jsx-f4bb48e980ebe674 fa-duotone fa-edit mr5 mt2 fs8"}),(0,d.jsx)("span",{className:"jsx-f4bb48e980ebe674",children:"Modificar"})]}),(0,d.jsx)(f(),{id:"f4bb48e980ebe674",children:".cursorp.jsx-f4bb48e980ebe674:hover>span.jsx-f4bb48e980ebe674,.cursorp.jsx-f4bb48e980ebe674:hover>i.jsx-f4bb48e980ebe674{text-decoration:underline;color:var(--primColor)}"})]})};b.Z=g},37222:function(a,b,c){var d=c(14924),e=c(29815),f=c(85893),g=c(60536),h=c.n(g);c(67294);var i=c(15342),j=function(a){var b=a.propertyToUpdate,c=a.valueToCompare,g=a.countChanges,j=a.width,k=void 0===j?"60%":j,l=a.widthOnMobile,m=void 0===l?"100%":l,n=a.form,o=a.text,p=a.mb,q=void 0===p?0:p,r=a.mr,s=void 0===r?0:r,t=a.mt,u=void 0===t?0:t,v=a.inputMl,w=void 0===v?0:v,x=a.ai,y=void 0===x?"center":x,z=a.jc,A=void 0===z?"space-between":z,B=a.pl,C=a.spanMR,D=(0,i.Z)({form:n}),E=D.formState,F=D.setFormProperties,G=D.updateArrayProperty,H=E[b],I=function(a){H&&H===c||(F({data:(0,d.Z)({},b,c||a.target.checked)}),g&&"company"===n&&G({arrayField:"propertiesThatChanged",replacingArray:Array.from(new Set((0,e.Z)(E.propertiesThatChanged).concat([b])))}),"service"===n&&"isOnline"!==b&&F({data:{price:0}}))},J=function(){c?H!==c&&F({data:(0,d.Z)({},b,c)}):document.getElementById(b).click()};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:h().dynamic([["77bfc19d3b3628ea",[k,y,A,q,u,s,B,w,m]]])+" toggle-container",children:[(0,f.jsx)("span",{onClick:J,style:{marginRight:void 0===C?"0":C},className:h().dynamic([["77bfc19d3b3628ea",[k,y,A,q,u,s,B,w,m]]]),children:o}),(0,f.jsx)("input",{type:"checkbox",id:b,value:H||!1,onChange:I,checked:(c?c===H:H)||!1,className:h().dynamic([["77bfc19d3b3628ea",[k,y,A,q,u,s,B,w,m]]])+" mt1"})]}),(0,f.jsx)(h(),{id:"77bfc19d3b3628ea",dynamic:[k,y,A,q,u,s,B,w,m],children:".toggle-container.__jsx-style-dynamic-selector{width:".concat(k,";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:").concat(y,";-webkit-align-items:").concat(y,";-moz-box-align:").concat(y,";-ms-flex-align:").concat(y,";align-items:").concat(y,";-webkit-box-pack:").concat(A,";-webkit-justify-content:").concat(A,";-moz-box-pack:").concat(A,";-ms-flex-pack:").concat(A,";justify-content:").concat(A,";margin-bottom:").concat(q,";margin-top:").concat(u,";margin-right:").concat(s,";padding-left:").concat(B,";cursor:pointer}input.__jsx-style-dynamic-selector{margin-left:").concat(w,";margin-right:.5rem;cursor:pointer}@media screen and (max-width:650px){.toggle-container.__jsx-style-dynamic-selector{width:").concat(m,"}}")})]})};b.Z=j},9308:function(a,b){var c=function(a,b,c){var d,e,f=arguments.length>3&& void 0!==arguments[3]?arguments[3]:0,g=arguments.length>4?arguments[4]:void 0;return(d=["USD","EUR"].includes(g)?Math.ceil(a*(null==f?void 0:f.toFixed(2))):100*Math.ceil(a*(null==f?void 0:f.toFixed(2))/100))<=c&&!(0===a&&!b)?c:d};b.Z=c},61049:function(a,b,c){var d=c(77349),e=c(92300),f=c(13079),g=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:new Date,c=7*a.recurrenceWeeks,g=new Date(a.recurrenceBeginning),h=(0,f.Z)(g,b,c),i=(0,d.Z)(g,c*h),j=new Date(a.lastRecurrenceUnixDate),k=(0,e.Z)(j,i),l=!1;return 7===c&&(l=k<=2),14===c&&(l=k<=3),21===c&&(l=k<=4),28===c&&(l=k<=5),(0,d.Z)(i,l?c:0)};b.Z=g},13079:function(a,b){var c=function(a,b,c){var d=arguments.length>3&& void 0!==arguments[3]?arguments[3]:0,e=Math.floor((b-a)/864e5);return Math.floor(e/c)+((e%c==0?0:1)+d)};b.Z=c},68874:function(a){var b=function(a,b){var c=15*a/60;b&&(c+=b);var d=Math.floor(c),e=(c-d)*60==0?"00":(c-d)*60,f=0;c>24&&(f=-24),c<0&&(f=24);var g=d+f;return{hour:g,minute:e,hourText:g+":"+e,hoursCorrection:f}},c=function(a){var c=a.hourBlock,d=a.finalBlocksAvailableForService,e=a.blocksServiceOccupy,f=a.blocksServiceDuration,g=a.blocksServiceLongestResourceUsed,h=a.hoursBlockedDetail,i=a.lastMemberWorkingHours,j=a.isVariableService,k=a.isQuottaLimitedService,l=a.isForClient,m=a.tzDifference,n=!1;if(d){for(var o=d.length,p=0;p<o;p++){var q=d[p],r=null==q?void 0:q.length,s=q.indexOf(c);if(-1!==s){var t=r-f,u=q[r-1],v=!j&&!k&&i.includes(u),w=u+1,x=h?h[w]:[],y=(null==x?void 0:x.includes("appointment"))||(null==x?void 0:x.includes("novelty")),z=null==x?void 0:x.includes("resource"),A=e;if(!y&&z&&(A=g),y&&z&&(A=Math.max(e,g)),n=(!(s>=t)||!v)&&s+A<=r)break}}var B=n|| !l&&c>27,C=b(c,m),D=C.hour,E=C.hourText,F=C.hoursCorrection;return{hour:D,hourBlockIsElegible:n,hourText:B?E:"",hoursCorrection:B?F:0}}};a.exports={checkIfBlockIsElegible:c,transformToHour:b}},73097:function(a,b,c){var d=c(29815),e=function(a,b,c,e,f){var g=[],h=!0,i=!1,j=void 0;try{for(var k,l=function(){var c=k.value,h=f.find(function(c){return c.day===a&&c.month===b}),i="".concat(a,"|").concat(b,"|").concat(c._id),j=h&&h[c._id]||{},l=e[i]||[],m=(0,d.Z)(new Set((0,d.Z)(Object.keys(j||{})).concat((0,d.Z)(l)))),n=[],o=!0,p=!1,q=void 0;try{for(var r,s=function(){var a=r.value;(j[a]||0)+(null==l?void 0:l.filter(function(b){return+b== +a}).length)>=c.quantity&&n.push(+a)},t=m[Symbol.iterator]();!(o=(r=t.next()).done);o=!0)s()}catch(u){p=!0,q=u}finally{try{o||null==t.return||t.return()}finally{if(p)throw q}}g=(0,d.Z)(g).concat((0,d.Z)(n))},m=c[Symbol.iterator]();!(h=(k=m.next()).done);h=!0)l()}catch(n){i=!0,j=n}finally{try{h||null==m.return||m.return()}finally{if(i)throw j}}return g};b.Z=e},39536:function(a,b,c){c.d(b,{FZ:function(){return s},ZP:function(){return t}});var d=c(14924),e=c(26042),f=c(69396),g=c(29815),h=c(92300),i=c(58545),j=c(85817),k=c(39159),l=function(a,b){var c=new Date(1970,0,1);return Math.floor((a-c)/864e5)%b},m=function(a,b){return b&&(null==b?void 0:b.length)!==0?a.map(function(a){var c=b.map(function(b){var c=b.workingDays.find(function(b){return b.name===a.name}),d=c.workingHours,e=c.isAvailable;return{workingHours:d,isAvailable:e}}),d=null==c?void 0:c.some(function(a){return!1===a.isAvailable}),g=c.map(function(a){return a.workingHours}),h=a.workingHours.filter(function(a){return!(null==g?void 0:g.some(function(b){return!b.includes(a)}))});return(0,f.Z)((0,e.Z)({},a),{isAvailable:!d&&a.isAvailable,workingHours:h})}):a},n=function(a){var b,c,d,e,f=a.blockedHours,g=a.workingHours,h=null===(b=Array.from(g))|| void 0===b?void 0:b.sort(function(a,b){return a-b});return f&&(null===(c=f.hoursBlocked)|| void 0===c?void 0:c.length)>0&&(h=null===(e=null===(d=Array.from(g))|| void 0===d?void 0:d.filter(function(a){return!f.hoursBlocked.includes(a)}))|| void 0===e?void 0:e.sort(function(a,b){return a-b})),h||[]},o=c(61049),p=c(15342),q=c(13079),r=function(a,b,c,d,e){if((null==b?void 0:b.frequencyType)!=="Recurrente")return a.day===c&&a.month===d&&a.year===e;var f=new Date(e,d-1,c),g=new Date(a.year,a.month-1,a.day),i=7*b.recurrenceWeeks,j=l(f,i),k=l(g,i),m=(0,h.Z)(g,f),n=m>=0,o=j===k;return o&&n},s=function(a,b,c,h,i,j,k,m){var n=c,p=null==h?void 0:h.find(function(a){return a.day===i&&a.month===j});return null==a||a.filter(function(a){var b;return(null==a?void 0:null===(b=a.type)|| void 0===b?void 0:b.name)!=="Rotaci\xf3n o suplencia"||a.workingStore!==m.stores[0]._id}).forEach(function(a){var c=new Date(k,j-1,i,23),h=new Date(a.recurrenceBeginning),m=!!a.lastRecurrenceProfessional&&a.lastRecurrenceProfessional!==a.professional,r="Anulado"===a.lastRecurrenceStatus,s=new Date(m||r||!a.lastRecurrenceUnixDate?Math.max(Date.now(),a.recurrenceBeginning):a.lastRecurrenceUnixDate),t=(0,o.Z)(a,s),u=(0,q.Z)(new Date(a.recurrenceBeginning),c,7*a.recurrenceWeeks,1),v=h.getDay(),w=c.getDay(),x=a.recurrenceEpochMod,y=l(c,7*a.recurrenceWeeks),z=a.endHourBlock-a.beginHourBlock+1,A=Array(z||0).fill().map(function(b,c){return a.beginHourBlock+c}),B=(null==b?void 0:b.frequencyType)==="Recurrente";if((x===y&&(+c>= +t|| +c>= +a.lastRecurrenceUnixDate&&!B&&!(null==a?void 0:a.recurrenceMaxCount))||v===w&&B&&(null==b?void 0:b.recurrenceWeeks)!==(null==a?void 0:a.recurrenceWeeks))&&(!(null==a?void 0:a.recurrenceMaxCount)||(null==a?void 0:a.recurrenceMaxCount)>=u)){n=n?(0,f.Z)((0,e.Z)({},n),{hoursBlocked:(0,g.Z)(new Set((0,g.Z)(null==n?void 0:n.hoursBlocked).concat((0,g.Z)(A)))),onlyThisStore:a.onlyThisStore}):{day:i,month:j,year:k,hoursBlocked:A,onlyThisStore:a.onlyThisStore};var C=A.reduce(function(a,b){return(0,f.Z)((0,e.Z)({},a),(0,d.Z)({},b,p?(0,g.Z)(p[b]||[]).concat(["recurrence"]):["recurrence"]))},{});p=p?(0,e.Z)({},p,C):(0,e.Z)({day:i,month:j},C)}}),{newHoursBlocked:n,newHoursBlockedDetail:p}},t=function(a){var b,c,d,h=a.day,o=a.month,q=a.year,t=a.weekDay,u=a.form,v=void 0===u?"appointment":u,w=a.editing,x=void 0!==w&&w,y=a.isForClient,z=(0,p.Z)({form:"company",shouldCleanForm:!1}).formState,A=(0,p.Z)({form:"appointment",shouldCleanForm:!1}).formState,B=new Date,C=B.getDate(),D=B.getMonth()+1,E=B.getFullYear(),F=0,G=0,H=new Date(E,D,C),I=new Date(q,o-1,h),J=H,K=null==z?void 0:z.minAnticipationRequired;G=(0,i.Z)(B,60*K);var L=(0,j.Z)(G),M=(0,k.Z)(G);F=Math.ceil((60*L+M)/15);var N=G.getDate(),O=G.getMonth()+1,P=G.getFullYear();J=new Date(P,O-1,N);var Q=A||{},R=Q.service,S=Q.selectedMember,T=Q.selectedDay,U=Q.hoursBlockedByDay,V=Q.hoursBlockedByDayDetail,W=Q.resourcesNeeded,X=Q.hoursBlockedByServiceEventByDay,Y=Q.additionalBlockedHours,Z=Q.workingDaysChanges,$=Q.recurrences,_=null==Z?void 0:Z.find(function(a){var b;return null===(b=a.blockingDays)|| void 0===b?void 0:b.some(function(a){return a.day===h&&a.month===o&&a.year===q})}),aa=m(_?_.workingDays:null==S?void 0:S.workingDays,W),ab=aa[t]||{},ac=ab.isAvailable,ad=ab.workingHours,ae=ab.rangesLimits,af=ab.hiddenHours,ag=null==S?void 0:null===(b=S.services)|| void 0===b?void 0:b.find(function(a){return(null==a?void 0:a._id)===(null==R?void 0:R._id)}),ah=!S.differentStore,ai=null==ag?void 0:ag.availableDays,aj=null==X?void 0:X.some(function(a){return a.day===h&&a.month===o&&a.year===q||a.recurrenceEpochMod===l(I,7*a.recurrenceWeeks)&&a.recurrenceBeginning<= +I}),ak=(null==ai?void 0:ai.includes(t))&&!_|| !!_&&ac&&_.services.includes(R._id)||aj,al=(null==R?void 0:R.frequencyType)==="Recurrente",am=(null==R?void 0:R.frequencyType)==="Regular",an=["De fecha variable","Por cupos"].includes(null==R?void 0:R.frequencyType);if(J>I&&"appointment"===v|| !ak&&(am||al)&&!S.differentStore)return{isAvailable:!!ak&&ac,hasSpaceForSelectedService:!1,finalBlocksAvailableForService:[]};if((an||!ah)&&!aj)return{isAvailable:!1,hasSpaceForSelectedService:!1,finalBlocksAvailableForService:[]};var ao=null==U?void 0:U.filter(function(a){return r(a,R,h,o,q)});ao=al?ao.reduce(function(a,b){return(0,f.Z)((0,e.Z)({},a),{hoursBlocked:(0,g.Z)(new Set((0,g.Z)(a.hoursBlocked).concat((0,g.Z)(b.hoursBlocked)))).sort()})},{day:h,month:o,year:q,hoursBlocked:[]}):ao[0],Array.isArray(Y)&&h===T&&ao&&(ao=(0,f.Z)((0,e.Z)({},ao),{hoursBlocked:(0,g.Z)(ao.hoursBlocked).concat((0,g.Z)(Y))})),Array.isArray(Y)&&!ao&&(ao={day:h,month:o,year:q,hoursBlocked:Y}),ao=s($,ag,ao,V,h,o,q,S).newHoursBlocked;var ap=null==X?void 0:X.reduce(function(a,b){var c=b.day===h&&b.month===o&&b.year===q,d=b.recurrenceEpochMod===l(I,7*b.recurrenceWeeks),i=!b.recurrenceBeginning||b.recurrenceBeginning<= +I,j=b.recurrenceWeeks>0;return c&&(i||!j)||d?(0,f.Z)((0,e.Z)({},a),{hoursBlocked:(0,g.Z)(a.hoursBlocked).concat((0,g.Z)(b.hoursBlocked))}):a},{day:h,month:o,year:q,hoursBlocked:[]});if(an){var aq=W.map(function(a){return a.workingDays[t].workingHours}),ar=ap.hoursBlocked.filter(function(a){return!(null==aq?void 0:aq.some(function(b){return!b.includes(a)}))});ap=(0,f.Z)((0,e.Z)({},ap),{hoursBlocked:ar})}if(I-J==0&&y){var as=Array(F).fill().map(function(a,b){return b});ao=ao?{day:h,month:o,year:q,hoursBlocked:(0,g.Z)(new Set((0,g.Z)(as).concat((0,g.Z)(ao.hoursBlocked))))}:{day:h,month:o,year:q,hoursBlocked:as}}var at=JSON.parse(localStorage.getItem("appointmentToEdit"));ao&&at&&at.selectedMember._id===A.selectedMember._id&&(null===(c=at.store)|| void 0===c?void 0:c._id)===(null===(d=S.stores[0])|| void 0===d?void 0:d._id)&&x&&(ao={day:ao.day,month:ao.month,year:ao.year,hoursBlocked:at.start.day===ao.day?ao.hoursBlocked.filter(function(a){return!A.appointmentToEditBlockedHours.includes(a)}):ao.hoursBlocked});for(var au=(null==ae?void 0:ae.length)===2?[ae[1]]:[ae[1],ae[3]],av=n({blockedHours:ao,workingHours:(am||al)&&!S.differentStore?ad:null==ap?void 0:ap.hoursBlocked}),aw=Math.ceil((null==R?void 0:R.blockingMinutes)/15),ax=Math.ceil((null==R?void 0:R.duration)/15),ay=av.length,az=av[ay-1],aA=[],aB=[],aC=0;aC<ay;aC++){var aD=av[aC],aE=av[aC-1],aF=aD===az,aG=aD-(aE||0);aE?(1===aG&&aB.push(aD),(aG>1||aF)&&(aB.length>=aw&&aA.push(aB),aB=[aD],aC===ay-1&&1===aw&&aA.push(aB))):aB.push(aD)}for(var aH=null==aA?void 0:aA.length,aI=!1,aJ=[],aK=0;aK<aH;aK++){var aL=aA[aK],aM=null==aL?void 0:aL.length,aN=aL[aM-1],aO=!an&&au.includes(aN);(aO&&aM>ax||!aO)&&(aI=!0,aJ.push(aL))}var aP=aJ.flat(),aQ=!0,aR=0,aS=[];if((null==R?void 0:R.frequencyType)!=="Por cupos"){var aT=z.hourBlocksToShow;aI=null==(aJ=aJ.map(function(a){var b=!1;return a.filter(function(a,c){var d=null==aT?void 0:aT.some(function(b){return 60*+(15*a/60%1).toFixed(2)== +b}),e=af.includes(a);return d&&(!e||(null==R?void 0:R.frequencyType)==="De fecha variable")?(b=!0,!0):!!b||(!!b||!!d)&&!e&&void 0})}))?void 0:aJ.some(function(a){return a.length>=aw})}aP.forEach(function(a){af.includes(a)||(aQ=!1,aS.push(a)),aR++});var aU=ao.onlyThisStore,aV=(null==aS?void 0:aS.length)===1&&1===aw&&(null==aS?void 0:aS[0])===az;return{isAvailable:(am||al)&&!aU?ac||ak&&S.differentStore:(!ah||!aU||!!S.differentStore)&&aj,hasSpaceForSelectedService:(!aQ||!am)&&(!ah||!aU||!S.differentStore)&&!aV&&aI,finalBlocksAvailableForService:aJ}}},78524:function(a,b,c){var d=c(313),e=c(42699),f=c(92300),g=c(55855),h=c(25145),i=c(20466),j=c(90259),k=c(78966),l=c(95570),m=c(77349),n=c(63345),o=c(67294),p=function(a){var b=a.initialDay,c=a.howMany,p=void 0===c?5:c,q=a.maxDaysInFuture,r=void 0===q?365:q,s=a.canGoToPast,t=void 0!==s&&s,u=a.isQuotaLimitted,v=a.setDaysAvailable,w=a.form,x=a.editing,y=(0,o.useState)([]),z=y[0],A=y[1],B=(0,o.useState)(b),C=B[0],D=B[1],E=(0,o.useState)(5),F=E[0],G=E[1],H=function(a){var c=(0,m.Z)(C,a),f=new Date(new Date().setUTCHours(3,0,0,0)),g=(0,m.Z)(f,r),h=(0,d.Z)(c,f),i=(0,e.Z)(c,(0,m.Z)(g,-1*p+1));(h&&!t||i&&1===a)&&a<0&&(c=x?new Date:b),i&&(c=(0,m.Z)(g,-1*p+1)),D(c),"appointment"===w&&v(function(){return[]}),G(a)};return(0,o.useEffect)(function(){r&&(!u||z)||D(b)},[b]),(0,o.useEffect)(function(){var a=new Date(C),b=(0,f.Z)(a,new Date),c=C;r<b&&(c=new Date);var d=Array(Math.max(p,0)).fill(0).map(function(a,b){var d=(0,m.Z)(c,b);return{day:(0,g.Z)(d),dayName:(0,h.Z)(d,"EEEE",{locale:n.Z}).slice(0,3),longDayName:(0,h.Z)(d,"EEEE",{locale:n.Z}),weekDay:0===(0,i.Z)(d)?6:(0,i.Z)(d)-1,weekOfYear:(0,j.Z)(d,{weekStartsOn:1}),month:(0,k.Z)(d)+1,monthName:(0,h.Z)(d,"MMMM",{locale:n.Z}).slice(0,3),longMonthName:(0,h.Z)(d,"MMMM",{locale:n.Z}),year:(0,l.Z)(d),date:d}});A(d)},[C]),{lastMove:F,dates:z,addOrRemoveDays:H}};b.Z=p}}])