"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1905],{91905:function(a,b,c){c.d(b,{Z:function(){return I}});var d,e=c(47568),f=c(26042),g=c(69396),h=c(34051),i=c.n(h),j=c(85893),k=c(60536),l=c.n(k),m=c(11163),n=c(67294),o=c(25617),p=c(48729),q=c(9669),r=c.n(q),s=c(86455),t=c.n(s),u=c(4586),v=c(68691),w=function(a){var b=a.provider,c=a.cart,d=a.companyId,e=b.name,f=b.imageName,g=function(){fbq("trackCustom","LoginWithSocial",{value:e.toLowerCase()});var a=localStorage.getItem("whereToGoBack");d&&(localStorage.setItem(d,JSON.stringify(c)),localStorage.setItem("cartTime",JSON.stringify(new Date))),localStorage.removeItem("loginCodeEmail"),a||localStorage.setItem("whereToGoBack","/"),window.location="".concat(p.dv,"/auth/").concat(e.toLowerCase())};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{onClick:g,className:"jsx-40438b59754282a8 button-login",children:[(0,j.jsx)("div",{className:"jsx-40438b59754282a8 mr15 w12 h12",children:(0,j.jsx)(v.Z,{src:"".concat(p.vc.baseImageUrl,"/loginicons/").concat(f,".png"),border:"none",width:"1.8rem",height:"1.8rem",marginTop:"-0.2rem",borderRadius:"0"})}),(0,j.jsxs)("span",{className:"jsx-40438b59754282a8 button-text",children:["Acceder con ",e]})]}),(0,j.jsx)(l(),{id:"40438b59754282a8",children:'.button-login.jsx-40438b59754282a8{width:22rem;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border:none;background-color:white;-webkit-border-radius:.3rem;-moz-border-radius:.3rem;border-radius:.3rem;padding:1.2rem 1rem;margin-bottom:1rem;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.5);-moz-box-shadow:0 1px 3px rgba(0,0,0,.5);box-shadow:0 1px 3px rgba(0,0,0,.5)}.button-login.jsx-40438b59754282a8:hover{cursor:pointer;-webkit-box-shadow:0 2px 7px rgba(0,0,0,.2);-moz-box-shadow:0 2px 7px rgba(0,0,0,.2);box-shadow:0 2px 7px rgba(0,0,0,.2)}.button-text.jsx-40438b59754282a8{font-size:var(--fs1);font-size:1.3rem;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-family:"Roboto"}@media screen and (max-width:700px){.button-login.jsx-40438b59754282a8{width:95%}}'})]})},x=w,y=c(28078),z=c(5152),A=c.n(z),B=c(73860),C=c(15342),D=c(80686),E=(d=(0,e.Z)(i().mark(function a(b,c){var d;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c){a.next=4;break}return a.abrupt("return",!1);case 4:return a.next=6,(0,D.H)("/appointments/verifyIfBannedLocal/".concat(b,"?companyId=").concat(c));case 6:return d=a.sent,a.abrupt("return",d);case 8:case"end":return a.stop()}},a)})),function(a,b){return d.apply(this,arguments)}),F=E,G=A()(function(){return Promise.resolve().then(c.bind(c,16777))},{loadableGenerated:{webpack:function(){return[16777]}},ssr:!1}),H=function(a){var b,c=a.autoFocus,d=a.onLogin,h=a.cart,k=a.companyId,q=a.loginCodeText,s=(0,n.useState)(!1),v=s[0],w=s[1],z=(0,n.useState)(!1),A=z[0],D=z[1],E=(0,n.useState)(!1),H=E[0],I=E[1],J=(0,n.useState)(!1),K=J[0],L=J[1],M=(0,n.useState)(""),N=M[0],O=M[1],P=(0,C.Z)({form:"login",shouldCleanForm:!0}),Q=P.setFormProperties,R=P.formState,S=R.email,T=R.codeToVerify,U=(0,C.Z)({form:"cart"}),V=U.setFormProperties,W=(0,m.useRouter)(),X=(0,o.I0)();(0,n.useEffect)(function(){if(W.query.email&&(W.replace(W.asPath.split("?")[0]),localStorage.clear(),localStorage.setItem("whereToGoBack","".concat(p.mb,"/empresas?checkFreeBooking=true")),$(W.query.email)),window.location.href.includes("invitation")){var a=JSON.parse(localStorage.getItem("user")),b=window.location.href.split("email=")[1];if((null==a?void 0:a.email)===b){localStorage.setItem("lastSelectedTab","Invitaciones"),W.push("/perfil");return}localStorage.clear(),X((0,y.av)({user:null})),W.replace("/login")}w(null==navigator?void 0:navigator.userAgent.includes("Instagram")),D(null==navigator?void 0:navigator.userAgent.includes("FB"))},[null==W?void 0:W.query]),(0,n.useEffect)(function(){var a=localStorage.getItem("loginCodeEmail");a&&(I(!0),Q({data:{email:a}}))},[]);var Y,Z=(b=(0,e.Z)(i().mark(function a(b){var c,d;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(fbq("trackCustom","SentLoginCode"),c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(S)){a.next=5;break}return t().fire({title:"\xa1UPS!",html:"El email ingresado no es v\xe1lido.",icon:"info"}),a.abrupt("return");case 5:return k&&(localStorage.setItem(k,JSON.stringify(h)),localStorage.setItem("cartTime",JSON.stringify(new Date)),localStorage.setItem("loginCodeEmail",S)),d="".concat(p.dv,"/auth/login/code/").concat(S),a.prev=7,O(b?"re-sending":"sending"),a.next=11,r()({method:"POST",url:d});case 11:O(b?"re-sent":"sent"),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(7),t().fire({title:"\xa1UPS!",html:"Hubo un error al enviar el c\xf3digo, intente m\xe1s tarde!",icon:"error"}),O("");case 18:case"end":return a.stop()}},a,null,[[7,14]])})),function(a){return b.apply(this,arguments)}),$=(Y=(0,e.Z)(i().mark(function a(b){var c,e,j,l,m,n,o,q,s,u,v,w;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(fbq("trackCustom","LoginWithCode",{codeToVerify:T}),L(!0),c=b?"?secretEmail=".concat(b):"",b){a.next=13;break}return j="".concat(p.dv,"/auth/login/code/verify/").concat(T),a.next=8,r()({method:"POST",headers:{"Content-Type":"application/json"},url:j,data:{email:S}});case 8:e=(l=a.sent).data,k&&(o=(n=null==e?void 0:null===(m=e.data)|| void 0===m?void 0:m.freeBookingOn)&&(null==n?void 0:n.includes(k)),V({data:{hasFreeBooking:o}}),localStorage.setItem(k,JSON.stringify((0,g.Z)((0,f.Z)({},h),{hasFreeBooking:o})))),a.next=14;break;case 13:e={ok:!0};case 14:if(!e.ok){a.next=41;break}return q="".concat(p.dv,"/auth/login").concat(c),a.prev=16,a.next=19,r()({method:"POST",headers:{"Content-Type":"application/json"},url:q,data:{email:b||S,password:"asdasdasd"}});case 19:if(u=(s=a.sent).data.data,L(!1),"undefined"!=typeof localStorage&&localStorage.setItem("jwt",JSON.stringify(u)),localStorage.setItem("lastSelectedTab","Mis empresas"),X((0,y.av)(u)),!((null==W?void 0:W.pathname)!=="/login")){a.next=31;break}return a.next=28,F(S,k);case 28:(v=a.sent)&&W.replace("/"),!v&&d&&d();case 31:d&&d(),a.next=39;break;case 34:a.prev=34,a.t0=a.catch(16),console.log({error:a.t0}),O(""),t().fire({title:"\xa1UPS!",html:"Hubo un error al iniciar sesi\xf3n, intente m\xe1s tarde!",icon:"error"});case 39:a.next=53;break;case 41:return a.next=43,t().fire({icon:"info",title:"\xa1UPS!",html:'\n          <p>El c\xf3digo ingresado es <u style="color: var(--red); margin-bottom: 1.5rem;">incorrecto</u>.</p>\n\n      <p>\xbfQuieres que te enviemos uno nuevo?</p>\n      ',confirmButtonText:"S\xed, reenviar c\xf3digo",showCancelButton:!0,cancelButtonText:"No, gracias"});case 43:if(!(w=a.sent).isConfirmed){a.next=52;break}return O("re-sending"),a.next=48,Z(!0);case 48:O("re-sent"),L(!1),a.next=53;break;case 52:L(!1);case 53:case"end":return a.stop()}},a,null,[[16,34]])})),function(a){return Y.apply(this,arguments)}),_=function(a){(13===a.charCode||"Enter"===a.code||"click"===a.type)&&Z()},aa=function(a){(13===a.charCode||"Enter"===a.code||"click"===a.type)&&$()};return console.log("es IG?",v),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"jsx-bb7cec4591709439 df fdc aic jcc w100p",children:[p.tF.filter(function(a){return"Google"!==a.name|| !v&&!A}).map(function(a){return(0,j.jsx)(x,{provider:a,cart:h,companyId:k},a.name)}),(0,j.jsxs)("form",{onSubmit:function(a){return a.preventDefault()},className:"jsx-bb7cec4591709439 login-email-container mb3",children:[(0,j.jsx)("h3",{className:"jsx-bb7cec4591709439 mr5 mb3 tac mt3 mb8 fs11",children:"ACCEDER CON TU EMAIL"}),(0,j.jsx)(u.Z,{form:"login",propertyToUpdate:"email",width:"20rem",widthOnMobile:"100%",label:"Email",placeholder:"Ingresa tu email",type:"email",id:"email",autocomplete:"email",onKeyPress:_,autoFocus:c,trimOnChange:!0,removeDiacritics:!0}),S&&!["sent","re-sent","re-sending"].includes(N)&&!H&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(G,{onClick:function(){return Z(!1)},width:"100%",fontSize:"1.1rem",children:"sending"===N?(0,j.jsx)(B.Z,{small:!0,height:"1rem",width:"100%"}):"Enviarme c\xf3digo"}),(0,j.jsx)(G,{onClick:function(){k&&(localStorage.setItem(k,JSON.stringify(h)),localStorage.setItem("cartTime",JSON.stringify(new Date)),localStorage.setItem("loginCodeEmail",S)),I(!0)},width:"100%",fontSize:"1.1rem",backgroundColor:"--blue",mt:"0.5rem",mtm:"0.5rem",children:"Ya tengo un c\xf3digo"})]}),S&&(["sent","re-sent","re-sending"].includes(N)||H)&&(0,j.jsxs)("div",{className:"jsx-bb7cec4591709439 df fdc mb10",children:[(0,j.jsx)(u.Z,{form:"login",propertyToUpdate:"codeToVerify",width:"20rem",label:"C\xf3digo de verificaci\xf3n",placeholder:"Ingresa tu c\xf3digo de verificaci\xf3n",mb:"0.3rem",trimOnChange:!0,onKeyPress:aa,autoFocus:!0}),"sent"===N&&(0,j.jsxs)("div",{className:"jsx-bb7cec4591709439 df fdc",children:[(0,j.jsxs)("small",{className:"jsx-bb7cec4591709439 ml3",children:["C\xf3digo enviado con \xe9xito!",(0,j.jsx)("i",{className:"jsx-bb7cec4591709439 fas fa-check-circle ml3 cprice"})]}),(0,j.jsxs)("small",{className:"jsx-bb7cec4591709439 ml3",children:["No olvides revisar tu casilla de"," ",(0,j.jsx)("b",{className:"jsx-bb7cec4591709439 cred",children:"correo no deseado"})," \uD83D\uDE42"]})]}),"re-sending"===N&&(0,j.jsxs)("div",{className:"jsx-bb7cec4591709439 df aic w110",children:[(0,j.jsx)("small",{className:"jsx-bb7cec4591709439 ml3",children:"Reenviando c\xf3digo..."}),(0,j.jsx)(B.Z,{small:!0,changeColor:!0,height:"1rem",width:"2rem",styles:{marginLeft:"1rem"}})]}),"re-sent"===N&&(0,j.jsxs)("div",{className:"jsx-bb7cec4591709439 df fdc",children:[(0,j.jsxs)("small",{className:"jsx-bb7cec4591709439 ml3",children:["C\xf3digo reenviado con \xe9xito!",(0,j.jsx)("i",{className:"jsx-bb7cec4591709439 fas fa-check-circle ml3 cprice"})]}),(0,j.jsxs)("small",{className:"jsx-bb7cec4591709439 ml3",children:["No olvides revisar tu casilla de"," ",(0,j.jsx)("b",{className:"jsx-bb7cec4591709439 cred",children:"correo no deseado"})," \uD83D\uDE42"]})]})]}),(null==T?void 0:T.length)===6&&!["sending","re-sending"].includes(N)&&(0,j.jsx)("div",{className:"jsx-bb7cec4591709439 df aic jcc",children:(0,j.jsx)(G,{onClick:function(){return $()},width:"100%",fontSize:"1.1rem",type:"submit",children:K?(0,j.jsx)(B.Z,{small:!0,height:"1rem",width:"100%"}):q||"Iniciar sesi\xf3n"})})]})]}),(0,j.jsx)(l(),{id:"bb7cec4591709439",children:".login-email-container.jsx-bb7cec4591709439{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:1rem;background-color:white;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-box-shadow:var(--boxShadow);-moz-box-shadow:var(--boxShadow);box-shadow:var(--boxShadow);-webkit-box-shadow:0 1px 3px rgba(0,0,0,.5);-moz-box-shadow:0 1px 3px rgba(0,0,0,.5);box-shadow:0 1px 3px rgba(0,0,0,.5)}@media screen and (max-width:650px){.login-email-container.jsx-bb7cec4591709439{width:95%}}"})]})},I=H}}])